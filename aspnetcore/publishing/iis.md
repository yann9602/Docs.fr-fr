---
title: "Héberger ASP.NET Core sur Windows avec IIS"
author: guardrex
description: "Configuration et déploiement d’applications ASP.NET Core sur Windows Server Internet Information Services (IIS)."
keywords: "ASP.NET Core, internet information services, iis, windows server, bundle d’hébergement, module asp.net core, déploiement web"
ms.author: riande
manager: wpickett
ms.date: 03/13/2017
ms.topic: article
ms.assetid: a4449ad3-5bad-410c-afa7-dc32d832b552
ms.technology: aspnet
ms.prod: asp.net-core
uid: publishing/iis
ms.openlocfilehash: e9e9019d5b879498e8800bb579c177dd3ad64061
ms.sourcegitcommit: 96af03c9f44f7c206e68ae3ef8596068e6b4e5fd
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/15/2017
---
# <a name="host-aspnet-core-on-windows-with-iis"></a><span data-ttu-id="1d200-104">Héberger ASP.NET Core sur Windows avec IIS</span><span class="sxs-lookup"><span data-stu-id="1d200-104">Host ASP.NET Core on Windows with IIS</span></span>

<span data-ttu-id="1d200-105">Par [Luke Latham](https://github.com/guardrex) et [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1d200-105">By [Luke Latham](https://github.com/guardrex) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

## <a name="supported-operating-systems"></a><span data-ttu-id="1d200-106">Systèmes d'exploitation pris en charge</span><span class="sxs-lookup"><span data-stu-id="1d200-106">Supported operating systems</span></span>

<span data-ttu-id="1d200-107">Les systèmes d’exploitation suivants sont pris en charge :</span><span class="sxs-lookup"><span data-stu-id="1d200-107">The following operating systems are supported:</span></span>

* <span data-ttu-id="1d200-108">Windows 7 et ultérieur</span><span class="sxs-lookup"><span data-stu-id="1d200-108">Windows 7 and newer</span></span>
* <span data-ttu-id="1d200-109">Windows Server 2008 R2 et ultérieur&#8224;</span><span class="sxs-lookup"><span data-stu-id="1d200-109">Windows Server 2008 R2 and newer&#8224;</span></span>

<span data-ttu-id="1d200-110">&#8224;D’un point de vue conceptuel, la configuration d’IIS décrite dans ce document s’applique également à l’hébergement d’applications ASP.NET Core sur Nano Server IIS, mais pour obtenir des instructions spécifiques, consultez [ASP.NET Core avec IIS sur Nano Server](xref:tutorials/nano-server).</span><span class="sxs-lookup"><span data-stu-id="1d200-110">&#8224;Conceptually, the IIS configuration described in this document also applies to hosting ASP.NET Core applications on Nano Server IIS, but refer to [ASP.NET Core with IIS on Nano Server](xref:tutorials/nano-server) for specific instructions.</span></span>

<span data-ttu-id="1d200-111">Le [serveur HTTP.sys](xref:fundamentals/servers/httpsys) (anciennement [WebListener](xref:fundamentals/servers/weblistener)) ne fonctionne pas dans une configuration de proxy inverse avec IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-111">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called [WebListener](xref:fundamentals/servers/weblistener)) won't work in a reverse-proxy configuration with IIS.</span></span> <span data-ttu-id="1d200-112">Vous devez utiliser le [server Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="1d200-112">You must use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="1d200-113">Configuration d’IIS</span><span class="sxs-lookup"><span data-stu-id="1d200-113">IIS configuration</span></span>

<span data-ttu-id="1d200-114">Activez le rôle **Serveur Web (IIS)** et établissez des services de rôle.</span><span class="sxs-lookup"><span data-stu-id="1d200-114">Enable the **Web Server (IIS)** role and establish role services.</span></span>

### <a name="windows-desktop-operating-systems"></a><span data-ttu-id="1d200-115">Systèmes d’exploitation de bureau Windows</span><span class="sxs-lookup"><span data-stu-id="1d200-115">Windows desktop operating systems</span></span>

<span data-ttu-id="1d200-116">Accédez à **Panneau de configuration** > **Programmes** > **Programmes et fonctionnalités** > **Activer ou désactiver des fonctionnalités Windows** (à gauche de l’écran).</span><span class="sxs-lookup"><span data-stu-id="1d200-116">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span> <span data-ttu-id="1d200-117">Ouvrez le groupe **Internet Information Services** et **Outils d’administration Web**.</span><span class="sxs-lookup"><span data-stu-id="1d200-117">Open the group for **Internet Information Services** and **Web Management Tools**.</span></span> <span data-ttu-id="1d200-118">Cochez la case **Console de gestion IIS**.</span><span class="sxs-lookup"><span data-stu-id="1d200-118">Check the box for **IIS Management Console**.</span></span> <span data-ttu-id="1d200-119">Cochez la case **Services World Wide Web**.</span><span class="sxs-lookup"><span data-stu-id="1d200-119">Check the box for **World Wide Web Services**.</span></span> <span data-ttu-id="1d200-120">Acceptez les fonctionnalités par défaut pour **Services World Wide Web** ou personnalisez les fonctionnalités d’IIS en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="1d200-120">Accept the default features for **World Wide Web Services** or customize the IIS features to suit your needs.</span></span>

![Console de gestion IIS et Services World Wide Web sont sélectionnés dans Fonctionnalités de Windows.](iis/_static/windows-features-win10.png)

### <a name="windows-server-operating-systems"></a><span data-ttu-id="1d200-122">Systèmes d’exploitation Windows Server</span><span class="sxs-lookup"><span data-stu-id="1d200-122">Windows Server operating systems</span></span>

<span data-ttu-id="1d200-123">Pour les systèmes d’exploitation de serveur, utilisez l’Assistant **Ajout de rôles et de fonctionnalités** par le biais du menu **Gérer** ou du lien dans **Gestionnaire de serveur**.</span><span class="sxs-lookup"><span data-stu-id="1d200-123">For server operating systems, use the **Add Roles and Features** wizard via the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="1d200-124">À l’étape **Rôles de serveurs**, cochez la case **Serveur Web (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="1d200-124">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

![Le rôle Serveur Web IIS est sélectionné à l’étape Sélectionner des rôles de serveurs.](iis/_static/server-roles-ws2016.png)

<span data-ttu-id="1d200-126">À l’étape **Services de rôle**, sélectionnez les services de rôle IIS souhaités ou acceptez les services de rôle par défaut.</span><span class="sxs-lookup"><span data-stu-id="1d200-126">On the **Role services** step, select the IIS role services you desire or accept the default role services provided.</span></span>

![Les services de rôle par défaut sont sélectionnés à l’étape Sélectionner des services de rôle.](iis/_static/role-services-ws2016.png)

<span data-ttu-id="1d200-128">Validez l’étape de **Confirmation** pour installer les services et le rôle de serveur web.</span><span class="sxs-lookup"><span data-stu-id="1d200-128">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="1d200-129">Un redémarrage du serveur/d’IIS n’est pas nécessaire après l’installation du rôle Serveur Web (IIS).</span><span class="sxs-lookup"><span data-stu-id="1d200-129">A server/IIS restart isn't required after installing the Web Server (IIS) role.</span></span>

## <a name="install-the-net-core-windows-server-hosting-bundle"></a><span data-ttu-id="1d200-130">Installer le bundle d’hébergement .NET Core Windows Server</span><span class="sxs-lookup"><span data-stu-id="1d200-130">Install the .NET Core Windows Server Hosting bundle</span></span>

1. <span data-ttu-id="1d200-131">Installez le [bundle d’hébergement .NET Core Windows Server](https://download.microsoft.com/download/5/C/1/5C190037-632B-443D-842D-39085F02E1E8/DotNetCore.2.0.3-WindowsHosting.exe) sur le système hôte.</span><span class="sxs-lookup"><span data-stu-id="1d200-131">Install the [.NET Core Windows Server Hosting bundle](https://download.microsoft.com/download/5/C/1/5C190037-632B-443D-842D-39085F02E1E8/DotNetCore.2.0.3-WindowsHosting.exe) on the hosting system.</span></span> <span data-ttu-id="1d200-132">Le bundle installe le Runtime .NET Core, la bibliothèque .NET Core et le [Module ASP.NET Core](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="1d200-132">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="1d200-133">Le module crée le proxy inverse entre IIS et le serveur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-133">The module creates the reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="1d200-134">Si le système n’a pas de connexion Internet, obtenez et installez [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) avant d’installer le bundle d’hébergement .NET Core Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1d200-134">If the system doesn't have an Internet connection, obtain and install the [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) before installing the .NET Core Windows Server Hosting bundle.</span></span>

2. <span data-ttu-id="1d200-135">Redémarrez le système ou exécutez **net stop was /y** suivi de **net start w3svc** à partir d’une invite de commandes pour prendre en compte une modification de la variable système PATH.</span><span class="sxs-lookup"><span data-stu-id="1d200-135">Restart the system or execute **net stop was /y** followed by **net start w3svc** from a command prompt to pick up a change to the system PATH.</span></span>

> [!NOTE]
> <span data-ttu-id="1d200-136">Si vous utilisez une configuration partagée IIS, consultez [Module ASP.NET Core avec configuration partagée des services Internet (IIS)](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="1d200-136">If you use an IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="1d200-137">Installer Web Deploy lors de la publication avec Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1d200-137">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="1d200-138">Si vous prévoyez de déployer vos applications avec [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) dans [Visual Studio](https://www.visualstudio.com/vs/), installez la dernière version de Web Deploy sur le système hôte.</span><span class="sxs-lookup"><span data-stu-id="1d200-138">If you intend to deploy your applications with [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) in [Visual Studio](https://www.visualstudio.com/vs/), install the latest version of Web Deploy on the hosting system.</span></span> <span data-ttu-id="1d200-139">Pour installer Web Deploy, vous pouvez utiliser [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) ou obtenir un programme d’installation directement à partir du [Centre de téléchargement Microsoft](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="1d200-139">To install Web Deploy, you can use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="1d200-140">La méthode recommandée est d’utiliser WebPI.</span><span class="sxs-lookup"><span data-stu-id="1d200-140">The preferred method is to use WebPI.</span></span> <span data-ttu-id="1d200-141">WebPI offre une installation autonome et une configuration pour les fournisseurs d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="1d200-141">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="application-configuration"></a><span data-ttu-id="1d200-142">Configuration d’application</span><span class="sxs-lookup"><span data-stu-id="1d200-142">Application configuration</span></span>

### <a name="enabling-the-iisintegration-components"></a><span data-ttu-id="1d200-143">Activation des composants IISIntegration</span><span class="sxs-lookup"><span data-stu-id="1d200-143">Enabling the IISIntegration components</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="1d200-144">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="1d200-144">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="1d200-145">Un fichier *Program.cs* standard appelle [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) pour commencer à configurer un hôte.</span><span class="sxs-lookup"><span data-stu-id="1d200-145">A typical *Program.cs* calls [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) to begin setting up a host.</span></span> <span data-ttu-id="1d200-146">`CreateDefaultBuilder` configure [Kestrel](xref:fundamentals/servers/kestrel) comme serveur web et active l’intégration d’IIS en configurant le chemin et le port de base pour le [module ASP.NET Core](xref:fundamentals/servers/aspnet-core-module) :</span><span class="sxs-lookup"><span data-stu-id="1d200-146">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) as the web server and enables IIS integration by configuring the base path and port for the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module):</span></span>

```csharp
public static IWebHost BuildWebHost(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="1d200-147">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="1d200-147">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="1d200-148">Incluez une dépendance sur le package [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) dans les dépendances de votre application.</span><span class="sxs-lookup"><span data-stu-id="1d200-148">Include a dependency on the [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package in your app dependencies.</span></span> <span data-ttu-id="1d200-149">Incorporez l’intergiciel (middleware) d’intégration IIS dans l’application en ajoutant la méthode d’extension *UseIISIntegration* à *WebHostBuilder* :</span><span class="sxs-lookup"><span data-stu-id="1d200-149">Incorporate IIS Integration middleware into the app by adding the *UseIISIntegration* extension method to *WebHostBuilder*:</span></span>

```csharp
var host = new WebHostBuilder()
    .UseKestrel()
    .UseIISIntegration()
    ...
```

<span data-ttu-id="1d200-150">`UseKestrel` et `UseIISIntegration` sont tous deux obligatoires.</span><span class="sxs-lookup"><span data-stu-id="1d200-150">Both `UseKestrel` and `UseIISIntegration` are required.</span></span> <span data-ttu-id="1d200-151">Le code qui appelle *UseIISIntegration* n’affecte pas la portabilité du code.</span><span class="sxs-lookup"><span data-stu-id="1d200-151">Code calling *UseIISIntegration* doesn't affect code portability.</span></span> <span data-ttu-id="1d200-152">Si l’application n’est pas exécutée derrière IIS (par exemple si l’application est exécutée directement sur Kestrel), `UseIISIntegration` n’effectue pas d’opérations.</span><span class="sxs-lookup"><span data-stu-id="1d200-152">If the app isn't run behind IIS (for example, the app is run directly on Kestrel), `UseIISIntegration` no-ops.</span></span>

---

<span data-ttu-id="1d200-153">Pour plus d’informations sur l’hébergement, consultez [Hébergement dans ASP.NET Core](xref:fundamentals/hosting).</span><span class="sxs-lookup"><span data-stu-id="1d200-153">For more information on hosting, see [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span></span>

### <a name="iis-options"></a><span data-ttu-id="1d200-154">Options IIS</span><span class="sxs-lookup"><span data-stu-id="1d200-154">IIS options</span></span>

<span data-ttu-id="1d200-155">Pour configurer les options de service *IISIntegration*, ajoutez une configuration de service pour *IISOptions* dans *ConfigureServices* :</span><span class="sxs-lookup"><span data-stu-id="1d200-155">To configure *IISIntegration* service options, include a service configuration for *IISOptions* in *ConfigureServices*:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    ...
});
```

| <span data-ttu-id="1d200-156">Option</span><span class="sxs-lookup"><span data-stu-id="1d200-156">Option</span></span>                         | <span data-ttu-id="1d200-157">Par défaut</span><span class="sxs-lookup"><span data-stu-id="1d200-157">Default</span></span> | <span data-ttu-id="1d200-158">Paramètre</span><span class="sxs-lookup"><span data-stu-id="1d200-158">Setting</span></span> |
| ------------------------------ | ------- | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="1d200-159">Si `true`, l’intergiciel (middleware) d’authentification définit `HttpContext.User` et répond aux questions génériques.</span><span class="sxs-lookup"><span data-stu-id="1d200-159">If `true`, the authentication middleware sets the `HttpContext.User` and responds to generic challenges.</span></span> <span data-ttu-id="1d200-160">Si `false`, l’intergiciel (middleware) d’authentification fournit uniquement une identité (`HttpContext.User`) et répond aux questions explicitement posées par `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="1d200-160">If `false`, the authentication middleware only provides an identity (`HttpContext.User`) and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="1d200-161">L’authentification Windows doit être activée dans IIS pour que `AutomaticAuthentication` fonctionne.</span><span class="sxs-lookup"><span data-stu-id="1d200-161">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="1d200-162">Définit le nom d’affichage montré aux utilisateurs sur les pages de connexion.</span><span class="sxs-lookup"><span data-stu-id="1d200-162">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="1d200-163">Si la valeur est `true` et que l’en-tête de requête `MS-ASPNETCORE-CLIENTCERT` est présent, `HttpContext.Connection.ClientCertificate` est renseigné.</span><span class="sxs-lookup"><span data-stu-id="1d200-163">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="webconfig"></a><span data-ttu-id="1d200-164">web.config</span><span class="sxs-lookup"><span data-stu-id="1d200-164">web.config</span></span>

<span data-ttu-id="1d200-165">Le fichier *web.config* configure principalement le module ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1d200-165">The *web.config* file primarily configures the ASP.NET Core Module.</span></span> <span data-ttu-id="1d200-166">Il peut éventuellement fournir d’autres paramètres de configuration IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-166">It may optionally provide additional IIS configuration settings.</span></span> <span data-ttu-id="1d200-167">La création, la transformation et la publication de *web.config* sont gérées par le Kit de développement logiciel (SDK) web .NET Core (`Microsoft.NET.Sdk.Web`).</span><span class="sxs-lookup"><span data-stu-id="1d200-167">Creating, transforming, and publishing *web.config* is handled by the .NET Core Web SDK (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="1d200-168">Celui-ci est défini en haut du fichier projet (*.csproj*), `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span><span class="sxs-lookup"><span data-stu-id="1d200-168">The SDK is set  at the top of the project file (*.csproj*), `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span></span> <span data-ttu-id="1d200-169">Pour empêcher le Kit SDK de transformer le fichier *web.config*, ajoutez la propriété **\<IsTransformWebConfigDisabled>** au fichier projet avec le paramètre `true` :</span><span class="sxs-lookup"><span data-stu-id="1d200-169">To prevent the SDK from transforming the *web.config* file, add the **\<IsTransformWebConfigDisabled>** property to the project file with a setting of `true`:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="1d200-170">Si vous n’avez pas de fichier *web.config* dans le projet quand vous publiez avec *dotnet publish* ou avec la publication Visual Studio, le fichier est créé pour vous dans la [sortie publiée](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="1d200-170">If you don't have a *web.config* file in the project when you publish with *dotnet publish* or with Visual Studio publish, the file is created for you in [published output](xref:hosting/directory-structure).</span></span> <span data-ttu-id="1d200-171">Si vous avez un fichier *web.config* dans votre projet, il est transformé avec le *processPath* et les *arguments* corrects pour configurer le [Module ASP.NET Core](xref:fundamentals/servers/aspnet-core-module), puis il est déplacé vers la sortie publiée.</span><span class="sxs-lookup"><span data-stu-id="1d200-171">If you have a *web.config* file in your project, it's transformed with the correct *processPath* and *arguments* to configure the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) and moved to published output.</span></span> <span data-ttu-id="1d200-172">La transformation ne touche pas les paramètres de configuration IIS que vous avez inclus dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="1d200-172">The transformation doesn't touch IIS configuration settings that you've included in the file.</span></span>

## <a name="create-the-iis-website"></a><span data-ttu-id="1d200-173">Créer le site web IIS</span><span class="sxs-lookup"><span data-stu-id="1d200-173">Create the IIS Website</span></span>

1. <span data-ttu-id="1d200-174">Sur le système IIS cible, créez un dossier pour contenir les dossiers et fichiers publiés de l’application, qui sont décrits dans [Structure de répertoires](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="1d200-174">On the target IIS system, create a folder to contain the app's published folders and files, which are described in [Directory Structure](xref:hosting/directory-structure).</span></span>

2. <span data-ttu-id="1d200-175">Dans le dossier que vous avez créé, créez un dossier *logs* pour contenir les journaux stdout (si vous prévoyez d’activer la journalisation pour résoudre les problèmes de démarrage).</span><span class="sxs-lookup"><span data-stu-id="1d200-175">Within the folder you created, create a *logs* folder to hold stdout logs (if you plan to enable logging to troubleshoot start-up issues).</span></span> <span data-ttu-id="1d200-176">Si vous envisagez de déployer votre application avec un dossier *journaux* dans la charge utile, vous pouvez ignorer cette étape.</span><span class="sxs-lookup"><span data-stu-id="1d200-176">If you plan to deploy your application with a *logs* folder in the payload, you may skip this step.</span></span> <span data-ttu-id="1d200-177">Il existe un [problème non résolu concernant la création automatique du dossier](https://github.com/aspnet/AspNetCoreModule/issues/30).</span><span class="sxs-lookup"><span data-stu-id="1d200-177">There's an [open issue to create the folder automatically](https://github.com/aspnet/AspNetCoreModule/issues/30).</span></span> <span data-ttu-id="1d200-178">Si vous voulez que MSBuild crée le dossier *logs* pour vous, ajoutez l’élément `Target` suivant à votre fichier projet :</span><span class="sxs-lookup"><span data-stu-id="1d200-178">If you would like MSBuild to create the *log* folder for you, add the following `Target` to your project file:</span></span>

   ```xml
   <Target Name="CreateLogsFolder" AfterTargets="AfterPublish">
     <MakeDir Directories="$(PublishDir)logs" Condition="!Exists('$(PublishDir)logs')" />
     <MakeDir Directories="$(PublishUrl)logs" Condition="!Exists('$(PublishUrl)logs')" />
   </Target>
   ```

3. <span data-ttu-id="1d200-179">Dans **IIS Manager**, créez un site web.</span><span class="sxs-lookup"><span data-stu-id="1d200-179">In **IIS Manager**, create a new website.</span></span> <span data-ttu-id="1d200-180">Spécifiez le **Nom du site** et définissez le **Chemin physique** sur le dossier de déploiement de l’application que vous avez créé.</span><span class="sxs-lookup"><span data-stu-id="1d200-180">Provide a **Site name** and set the **Physical path** to the app's deployment folder that you created.</span></span> <span data-ttu-id="1d200-181">Spécifiez la configuration de **Liaison** et créez le site web.</span><span class="sxs-lookup"><span data-stu-id="1d200-181">Provide the **Binding** configuration and create the website.</span></span>

4. <span data-ttu-id="1d200-182">Sélectionnez **Aucun code managé** pour le pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-182">Set the application pool to **No Managed Code**.</span></span> <span data-ttu-id="1d200-183">ASP.NET Core s’exécute dans un processus séparé et gère l’exécution.</span><span class="sxs-lookup"><span data-stu-id="1d200-183">ASP.NET Core runs in a separate process and manages the runtime.</span></span>

5. <span data-ttu-id="1d200-184">Ouvrez la fenêtre **Ajouter un site Web**.</span><span class="sxs-lookup"><span data-stu-id="1d200-184">Open the **Add Website** window.</span></span>

   ![Cliquez sur Ajouter un site Web dans le menu contextuel Sites.](iis/_static/add-website-context-menu-ws2016.png)

6. <span data-ttu-id="1d200-186">Configurez le site web.</span><span class="sxs-lookup"><span data-stu-id="1d200-186">Configure the website.</span></span>

   ![Spécifiez le nom du site, le chemin physique et le nom d’hôte à l’étape Ajouter un site Web.](iis/_static/add-website-ws2016.png)

7. <span data-ttu-id="1d200-188">Dans le panneau **Pools d’applications**, ouvrez la fenêtre **Modifier le pool d’applications** en cliquant avec le bouton droit sur le pool d’applications du site web et en sélectionnant **Paramètres de base...** dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="1d200-188">In the **Application Pools** panel, open the **Edit Application Pool** window by right-clicking on the website's app pool and selecting **Basic Settings...** from the popup menu.</span></span>

   ![Sélectionnez Paramètres de base dans le menu contextuel du pool d’applications.](iis/_static/apppools-basic-settings-ws2016.png)

8. <span data-ttu-id="1d200-190">Affectez la valeur **Aucun code managé** à **Version du CLR .NET**.</span><span class="sxs-lookup"><span data-stu-id="1d200-190">Set the **.NET CLR version** to **No Managed Code**.</span></span>

   ![Définissez Aucun code managé pour la Version du CLR .NET.](iis/_static/edit-apppool-ws2016.png)
     
    <span data-ttu-id="1d200-192">Remarque : L’affectation de la valeur **Aucun code managé** à **Version du CLR .NET** est facultative.</span><span class="sxs-lookup"><span data-stu-id="1d200-192">Note: Setting the **.NET CLR version** to **No Managed Code** is optional.</span></span> <span data-ttu-id="1d200-193">ASP.NET Core ne repose pas sur le chargement du CLR de bureau.</span><span class="sxs-lookup"><span data-stu-id="1d200-193">ASP.NET Core doesn't rely on loading the desktop CLR.</span></span>

9. <span data-ttu-id="1d200-194">Vérifiez que l’identité de modèle de processus dispose des autorisations appropriées.</span><span class="sxs-lookup"><span data-stu-id="1d200-194">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="1d200-195">Si vous remplacez l’identité par défaut du pool d’applications (**Modèle de processus** > **Identité**) **ApplicationPoolIdentity** par une autre identité, vérifiez que la nouvelle identité dispose des autorisations nécessaires pour accéder au dossier de l’application, à la base de données et aux autres ressources nécessaires.</span><span class="sxs-lookup"><span data-stu-id="1d200-195">If you change the default identity of the app pool (**Process Model** > **Identity**) from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span>
   
## <a name="deploy-the-application"></a><span data-ttu-id="1d200-196">Déployer l'application</span><span class="sxs-lookup"><span data-stu-id="1d200-196">Deploy the application</span></span>
<span data-ttu-id="1d200-197">Déployez l’application sur le dossier que vous avez créé sur le système IIS cible.</span><span class="sxs-lookup"><span data-stu-id="1d200-197">Deploy the application to the folder you created on the target IIS system.</span></span> <span data-ttu-id="1d200-198">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) est le mécanisme recommandé pour le déploiement.</span><span class="sxs-lookup"><span data-stu-id="1d200-198">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment.</span></span> <span data-ttu-id="1d200-199">Les alternatives à Web Deploy sont répertoriées ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="1d200-199">Alternatives to Web Deploy are listed below.</span></span>

<span data-ttu-id="1d200-200">Vérifiez que l’application publiée pour le déploiement n’est pas en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="1d200-200">Confirm that the published app for deployment isn't running.</span></span> <span data-ttu-id="1d200-201">Les fichiers dans le dossier *publish* sont verrouillés quand l’application est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="1d200-201">Files in the *publish* folder are locked when the app is running.</span></span> <span data-ttu-id="1d200-202">Le déploiement ne peut pas se produire car les fichiers verrouillés ne peuvent pas être copiés.</span><span class="sxs-lookup"><span data-stu-id="1d200-202">Deployment can't occur because locked files can't be copied.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="1d200-203">Web Deploy avec Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1d200-203">Web Deploy with Visual Studio</span></span>
<span data-ttu-id="1d200-204">Pour découvrir comment créer un profil de publication pour une utilisation avec Web Deploy, consultez la rubrique [Créer des profils de publication pour Visual Studio et MSBuild afin de déployer des applications ASP.NET Core](xref:publishing/web-publishing-vs#publish-profiles).</span><span class="sxs-lookup"><span data-stu-id="1d200-204">See [Create publish profiles for Visual Studio and MSBuild, to deploy ASP.NET Core apps](xref:publishing/web-publishing-vs#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="1d200-205">Si votre fournisseur d’hébergement fournit un profil de publication ou prend en charge sa création, téléchargez son profil et importez-le à l’aide de la boîte de dialogue **Publier** de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1d200-205">If your hosting provider supplies a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog.</span></span>

![Boîte de dialogue Publier](iis/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="1d200-207">Web Deploy en dehors de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1d200-207">Web Deploy outside of Visual Studio</span></span>
<span data-ttu-id="1d200-208">Vous pouvez également utiliser [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) en dehors de Visual Studio à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="1d200-208">You can also use [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) outside of Visual Studio from the command line.</span></span> <span data-ttu-id="1d200-209">Pour plus d’informations, consultez [Web Deployment Tool (Outil de déploiement Web)](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="1d200-209">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="1d200-210">Alternatives à Web Deploy</span><span class="sxs-lookup"><span data-stu-id="1d200-210">Alternatives to Web Deploy</span></span>
<span data-ttu-id="1d200-211">Si vous ne souhaitez pas utiliser Web Deploy ou si vous n’utilisez pas Visual Studio, plusieurs méthodes sont à votre disposition pour déplacer l’application vers le système hôte, telles que Xcopy, Robocopy ou PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1d200-211">If you don't wish to use Web Deploy or are not using Visual Studio, you may use any of several methods to move the application to the hosting system, such as Xcopy, Robocopy, or PowerShell.</span></span> <span data-ttu-id="1d200-212">Les utilisateurs de Visual Studio peuvent utiliser les [Exemples de publication](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span><span class="sxs-lookup"><span data-stu-id="1d200-212">Visual Studio users may use the [Publish Samples](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="1d200-213">Parcourir le site web</span><span class="sxs-lookup"><span data-stu-id="1d200-213">Browse the website</span></span>
![Le navigateur Microsoft Edge a chargé la page de démarrage IIS.](iis/_static/browsewebsite.png)
   
> [!WARNING]
> <span data-ttu-id="1d200-215">Les applications .NET Core sont hébergées par le biais d’un proxy inverse entre IIS et le serveur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-215">.NET Core apps are hosted via a reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="1d200-216">Pour créer le proxy inverse, le fichier *web.config* doit être présent dans le chemin de racine de contenu (généralement le chemin de base de l’application) de l’application déployée, qui est le chemin physique du site web fourni à IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-216">In order to create the reverse-proxy, the *web.config* file must be present at the content root path (typically the app base path) of the deployed application, which is the website physical path provided to IIS.</span></span> <span data-ttu-id="1d200-217">Il existe des fichiers sensibles sur le chemin physique de l’application, notamment des sous-dossiers, tels que *my_application.runtimeconfig.json*, *my_application.xml* (commentaires de Documentation XML) et *my_ application.DEPS.JSON*.</span><span class="sxs-lookup"><span data-stu-id="1d200-217">Sensitive files exist on the app's physical path, including subfolders, such as *my_application.runtimeconfig.json*, *my_application.xml* (XML Documentation comments), and *my_application.deps.json*.</span></span> <span data-ttu-id="1d200-218">Le fichier *web.config* est obligatoire pour créer le proxy inverse pour Kestrel, qui empêche qu’IIS traite ces fichiers sensibles et d’autres.</span><span class="sxs-lookup"><span data-stu-id="1d200-218">The *web.config* file is required to create the reverse proxy to Kestrel, which prevents IIS from serving these and other sensitive files.</span></span> <span data-ttu-id="1d200-219">**Par conséquent, le fichier *web.config* ne doit jamais être accidentellement renommé ou supprimé du déploiement.**</span><span class="sxs-lookup"><span data-stu-id="1d200-219">**Therefore, it's important that the *web.config* file isn't accidently renamed or removed from the deployment.**</span></span>

## <a name="data-protection"></a><span data-ttu-id="1d200-220">Protection des données</span><span class="sxs-lookup"><span data-stu-id="1d200-220">Data protection</span></span>

<span data-ttu-id="1d200-221">Une application ASP.NET Core stocke le porte-clés en mémoire quand les conditions suivantes sont remplies :</span><span class="sxs-lookup"><span data-stu-id="1d200-221">An ASP.NET Core application stores the keyring in memory under the following conditions:</span></span>

* <span data-ttu-id="1d200-222">Un site web est hébergé derrière IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-222">A website is hosted behind IIS.</span></span>
* <span data-ttu-id="1d200-223">La pile Protection des données n’a pas été configurée pour stocker le porte-clés dans un magasin persistant.</span><span class="sxs-lookup"><span data-stu-id="1d200-223">The Data Protection stack hasn't been configured to store the keyring in a persistent store.</span></span>

<span data-ttu-id="1d200-224">Si le porte-clés est stocké en mémoire, au redémarrage de l’application :</span><span class="sxs-lookup"><span data-stu-id="1d200-224">If the keyring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="1d200-225">Tous les jetons d’authentification de formulaires deviennent non valides.</span><span class="sxs-lookup"><span data-stu-id="1d200-225">All forms authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="1d200-226">Les utilisateurs doivent se reconnecter pour envoyer leur prochaine demande.</span><span class="sxs-lookup"><span data-stu-id="1d200-226">Users are required to login again on their next request.</span></span> 
* <span data-ttu-id="1d200-227">Toutes les données que vous avez protégées avec le porte-clés ne sont plus protégées.</span><span class="sxs-lookup"><span data-stu-id="1d200-227">Any data you protected with the keyring are no longer protected.</span></span>

> [!WARNING]
> <span data-ttu-id="1d200-228">Protection des données est utilisée par plusieurs intergiciels ASP.NET, notamment ceux utilisés lors de l’authentification.</span><span class="sxs-lookup"><span data-stu-id="1d200-228">Data Protection is used by several ASP.NET middlewares, including those used in authentication.</span></span> <span data-ttu-id="1d200-229">Même si vous n’appelez pas d’API de protection des données à partir de votre propre code, vous devez configurer la protection des données avec un script de déploiement ou dans votre code.</span><span class="sxs-lookup"><span data-stu-id="1d200-229">Even if you don't call Data Protection APIs from your own code, you should configure Data Protection with a deployment script or in your code.</span></span> <span data-ttu-id="1d200-230">Si vous ne configurez pas la protection des données, par défaut, les clés sont conservées en mémoire et ignorées au redémarrage de votre application.</span><span class="sxs-lookup"><span data-stu-id="1d200-230">If you don't configure data protection, by default the keys are held in memory and discarded when your app restarts.</span></span> <span data-ttu-id="1d200-231">Le redémarrage rend non valide tout cookie écrit par l’intergiciel (middleware) d’authentification par cookie et les utilisateurs doivent se reconnecter.</span><span class="sxs-lookup"><span data-stu-id="1d200-231">Restarting invalidates cookies written by the cookie authentication middleware and users must login again.</span></span>

<span data-ttu-id="1d200-232">Pour configurer la protection des données sous IIS, vous devez adopter l’une des approches suivantes :</span><span class="sxs-lookup"><span data-stu-id="1d200-232">To configure Data Protection under IIS, you must use one of the following approaches:</span></span>

* <span data-ttu-id="1d200-233">Exécutez un [script powershell](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) pour créer des entrées de Registre appropriées (par exemple, `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span><span class="sxs-lookup"><span data-stu-id="1d200-233">Run a [powershell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) to create suitable registry entries (For example, `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span></span> <span data-ttu-id="1d200-234">Cela permet de stocker les clés dans le Registre et de les protéger à l’aide de DPAPI avec une clé à l’échelle de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="1d200-234">This stores keys in the registry, protected using DPAPI with a machine-wide key.</span></span>
* <span data-ttu-id="1d200-235">Configurez le pool d’applications IIS pour charger le profil utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1d200-235">Configure the IIS Application Pool to load the user profile.</span></span> <span data-ttu-id="1d200-236">Ce paramètre se trouve dans la section **Modèle de processus** sous les **Paramètres avancés** du pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-236">This setting is in the **Process Model** section under the **Advanced Settings** for the application pool.</span></span> <span data-ttu-id="1d200-237">Affectez la valeur `True` à **Charger le profil utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="1d200-237">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="1d200-238">Cela permet de stocker les clés sous le répertoire du profil utilisateur et de les protéger à l’aide de DPAPI avec une clé propre au compte d’utilisateur utilisé pour le pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-238">This stores keys under the user profile directory and protects them using DPAPI with a key specific to the user account used for the app pool.</span></span>
* <span data-ttu-id="1d200-239">Ajustez votre code d’application pour [utiliser le système de fichiers comme magasin de porte-clés](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="1d200-239">Adjust your app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="1d200-240">Utilisez un certificat X509 pour protéger le porte-clés et vérifiez qu’il s’agit d’un certificat approuvé.</span><span class="sxs-lookup"><span data-stu-id="1d200-240">Use an X509 certificate to protect the keyring and ensure it's a trusted certificate.</span></span> <span data-ttu-id="1d200-241">S’il s’agit d’un certificat autosigné, vous devez le placer dans le magasin racine approuvé.</span><span class="sxs-lookup"><span data-stu-id="1d200-241">If it's a self signed certificate, you must place it in the Trusted Root store.</span></span>

<span data-ttu-id="1d200-242">Quand vous utilisez IIS dans une batterie de serveurs web :</span><span class="sxs-lookup"><span data-stu-id="1d200-242">When using IIS in a web farm:</span></span>

* <span data-ttu-id="1d200-243">Utilisez un partage de fichiers accessible par tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="1d200-243">Use a file share that all machines can access.</span></span>
* <span data-ttu-id="1d200-244">Déployez un certificat X509 sur chaque ordinateur.</span><span class="sxs-lookup"><span data-stu-id="1d200-244">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="1d200-245">Configurez la [protection des données dans le code](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="1d200-245">Configure [data protection in code](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span></span>

### <a name="1-create-a-data-protection-registry-hive"></a><span data-ttu-id="1d200-246">1. Créer une ruche de Registre de Protection des données</span><span class="sxs-lookup"><span data-stu-id="1d200-246">1. Create a Data Protection Registry Hive</span></span>

<span data-ttu-id="1d200-247">Les clés de Protection des données utilisées par les applications ASP.NET sont stockées dans des ruches de Registre externes aux applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-247">Data Protection keys used by ASP.NET applications are stored in registry hives external to the applications.</span></span> <span data-ttu-id="1d200-248">Afin de conserver les clés pour une application donnée, vous devez créer une ruche de Registre pour le pool d’applications de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-248">To persist the keys for a given application, you must create a registry hive for the app's application pool.</span></span>

<span data-ttu-id="1d200-249">Pour les installations IIS autonomes, vous pouvez utiliser le [script PowerShell Provision-AutoGenKeys.ps1 de protection des données](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) pour chaque pool d’applications utilisé avec une application ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1d200-249">For standalone IIS installations, you may use the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="1d200-250">Ce script crée une clé de Registre spéciale dans le Registre HKLM, gérée par liste de contrôle d’accès uniquement pour le compte du processus Worker.</span><span class="sxs-lookup"><span data-stu-id="1d200-250">This script creates a special registry key in the HKLM registry that is ACLed only to the worker process account.</span></span> <span data-ttu-id="1d200-251">Les clés sont chiffrées au repos à l’aide de DPAPI.</span><span class="sxs-lookup"><span data-stu-id="1d200-251">Keys are encrypted at rest using DPAPI.</span></span>

<span data-ttu-id="1d200-252">Dans les scénarios de batterie de serveurs web, vous pouvez configurer une application afin qu’elle utilise un chemin UNC pour stocker son porte-clés de protection des données.</span><span class="sxs-lookup"><span data-stu-id="1d200-252">In web farm scenarios, an app can be configured to use a UNC path to store its data protection keyring.</span></span> <span data-ttu-id="1d200-253">Par défaut, les clés de protection des données ne sont pas chiffrées.</span><span class="sxs-lookup"><span data-stu-id="1d200-253">By default, the data protection keys are not encrypted.</span></span> <span data-ttu-id="1d200-254">Vous devez vérifier que les autorisations de fichiers pour ce type de partage sont limitées au compte Windows sous lequel s’exécute l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-254">You should ensure that the file permissions for such a share are limited to the Windows account the app runs as.</span></span> <span data-ttu-id="1d200-255">Vous pouvez également choisir de protéger les clés au repos à l’aide d’un certificat X509.</span><span class="sxs-lookup"><span data-stu-id="1d200-255">In addition, you may choose to protect keys at rest using an X509 certificate.</span></span> <span data-ttu-id="1d200-256">Si vous voulez mettre en œuvre un mécanisme permettant aux utilisateurs de charger des certificats, placez les certificats dans le magasin de certificats approuvés de l’utilisateur et vérifiez qu’ils sont disponibles sur tous les ordinateurs où s’exécute l’application de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1d200-256">You may wish to consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="1d200-257">Pour plus d’informations, consultez [Configuration de la Protection des données](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="1d200-257">See [Configuring Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

### <a name="2-configure-the-iis-application-pool-to-load-the-user-profile"></a><span data-ttu-id="1d200-258">2. Configurer le pool d’applications IIS pour charger le profil utilisateur</span><span class="sxs-lookup"><span data-stu-id="1d200-258">2. Configure the IIS Application Pool to load the user profile</span></span>

<span data-ttu-id="1d200-259">Ce paramètre se trouve dans la section **Modèle de processus** sous les **Paramètres avancés** du pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-259">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="1d200-260">Définissez Charger le profil utilisateur sur `True`.</span><span class="sxs-lookup"><span data-stu-id="1d200-260">Set Load User Profile to `True`.</span></span> <span data-ttu-id="1d200-261">Cela permet de stocker les clés sous le répertoire du profil utilisateur et de les protéger à l’aide de DPAPI avec une clé propre au compte d’utilisateur utilisé pour le pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-261">This stores keys under the user profile directory and protects them using DPAPI with a key specific to the user account used for the app pool.</span></span>

### <a name="3-machine-wide-policy-for-data-protection"></a><span data-ttu-id="1d200-262">3. Stratégie au niveau de l’ordinateur pour la protection des données</span><span class="sxs-lookup"><span data-stu-id="1d200-262">3. Machine-wide policy for data protection</span></span>

<span data-ttu-id="1d200-263">Le système de protection des données offre une prise en charge limitée de la définition d’une [stratégie au niveau de l’ordinateur](xref:security/data-protection/configuration/machine-wide-policy) par défaut pour toutes les applications qui utilisent les API de protection des données.</span><span class="sxs-lookup"><span data-stu-id="1d200-263">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="1d200-264">Pour plus d’informations, consultez la documentation de [protection des données](xref:security/data-protection/index).</span><span class="sxs-lookup"><span data-stu-id="1d200-264">See the [data protection](xref:security/data-protection/index) documentation for more details.</span></span>

## <a name="configuration-of-sub-applications"></a><span data-ttu-id="1d200-265">Configuration des sous-applications</span><span class="sxs-lookup"><span data-stu-id="1d200-265">Configuration of sub-applications</span></span>

<span data-ttu-id="1d200-266">Les sous-applications ajoutées sous l’application racine ne doivent pas inclure le Module ASP.NET Core en tant que gestionnaire.</span><span class="sxs-lookup"><span data-stu-id="1d200-266">Sub applications added under the root application shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="1d200-267">Si vous ajoutez le module en guise de gestionnaire dans le fichier *web.config* d’une sous-application, vous recevez une erreur 500.19 (erreur interne du serveur) référençant le fichier de configuration défectueux quand vous essayez d’accéder à la sous-application.</span><span class="sxs-lookup"><span data-stu-id="1d200-267">If you add the module as a handler in a sub-application's *web.config* file, you receive a 500.19 (Internal Server Error) referencing the faulty config file when you attempt to browse the sub-app.</span></span> <span data-ttu-id="1d200-268">L’exemple suivant montre le contenu d’un fichier *web.config* publié pour une sous-application ASP.NET Core :</span><span class="sxs-lookup"><span data-stu-id="1d200-268">The following example shows the contents of a published *web.config* file for an ASP.NET Core sub-app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="1d200-269">Si vous envisagez d’héberger une sous-application non-ASP.NET Core sous une application ASP.NET Core, vous devez supprimer explicitement le gestionnaire hérité dans le fichier *web.config* de la sous-application :</span><span class="sxs-lookup"><span data-stu-id="1d200-269">If you intend to host a non-ASP.NET Core sub-app underneath an ASP.NET Core app, you must explicitly remove the inherited handler in the sub-app *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore"/>
    </handlers>
    <aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="1d200-270">Pour plus d’informations sur la configuration du Module ASP.NET Core avec le fichier *web.config*, consultez la rubrique [Introduction au Module ASP.NET Core](xref:fundamentals/servers/aspnet-core-module) et la [Référence de configuration du Module ASP.NET Core](xref:hosting/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="1d200-270">For more information on configuring the ASP.NET Core Module with the *web.config* file, see the [Introduction to ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) topic and the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module).</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="1d200-271">Configuration d’IIS avec web.config</span><span class="sxs-lookup"><span data-stu-id="1d200-271">Configuration of IIS with web.config</span></span>

<span data-ttu-id="1d200-272">La configuration d’IIS est toujours influencée par la section `<system.webServer>` de *web.config* pour les fonctionnalités d’IIS qui s’appliquent à une configuration de proxy inverse.</span><span class="sxs-lookup"><span data-stu-id="1d200-272">IIS configuration is still influenced by the `<system.webServer>` section of *web.config* for those IIS features that apply to a reverse proxy configuration.</span></span> <span data-ttu-id="1d200-273">Par exemple, vous avez peut-être configuré IIS au niveau du système pour qu’il utilise la compression dynamique, mais vous pouvez désactiver ce paramètre pour une application avec l’élément `<urlCompression>` dans le fichier *web.config* de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-273">For example, you may have IIS configured at the system level to use dynamic compression, but you could disable that setting for an app with the `<urlCompression>` element in the app's *web.config* file.</span></span> <span data-ttu-id="1d200-274">Pour plus d’informations, consultez la [référence de configuration pour `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [Référence de configuration du Module ASP.NET Core](xref:hosting/aspnet-core-module) et [Utilisation des modules IIS avec ASP.NET Core](xref:hosting/iis-modules).</span><span class="sxs-lookup"><span data-stu-id="1d200-274">For more information, see the [configuration reference for `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [ASP.NET Core Module Configuration Reference](xref:hosting/aspnet-core-module) and [Using IIS Modules with ASP.NET Core](xref:hosting/iis-modules).</span></span> <span data-ttu-id="1d200-275">Si vous devez définir des variables d’environnement pour des applications qui s’exécutent dans des pools d’applications isolés (prise en charge sur IIS 10.0+), consultez la section *Commande AppCmd.exe* de la rubrique [Variables d’environnement \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) dans la documentation de référence IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-275">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="1d200-276">Sections de configuration de web.config</span><span class="sxs-lookup"><span data-stu-id="1d200-276">Configuration sections of web.config</span></span>

<span data-ttu-id="1d200-277">Contrairement aux applications .NET Framework configurées avec les éléments `<system.web>`, `<appSettings>`, `<connectionStrings>` et `<location>` dans *web.config*, les applications ASP.NET Core sont configurées à l’aide d’autres fournisseurs de configuration.</span><span class="sxs-lookup"><span data-stu-id="1d200-277">Unlike .NET Framework applications that are configured with the `<system.web>`, `<appSettings>`, `<connectionStrings>`, and `<location>` elements in *web.config*, ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="1d200-278">Pour plus d’informations, consultez [Configuration](xref:fundamentals/configuration).</span><span class="sxs-lookup"><span data-stu-id="1d200-278">For more information, see [Configuration](xref:fundamentals/configuration).</span></span>

## <a name="application-pools"></a><span data-ttu-id="1d200-279">Pools d'applications</span><span class="sxs-lookup"><span data-stu-id="1d200-279">Application Pools</span></span>

<span data-ttu-id="1d200-280">Quand vous hébergez plusieurs sites web sur un même système, vous devez isoler les applications les unes des autres en exécutant chaque application dans son propre pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-280">When hosting multiple websites on a single system, you should isolate the apps from each other by running each app in its own application pool.</span></span> <span data-ttu-id="1d200-281">La boîte de dialogue **Ajouter un site Web** d’IIS applique ce comportement par défaut.</span><span class="sxs-lookup"><span data-stu-id="1d200-281">The IIS **Add Website** dialog defaults to this behavior.</span></span> <span data-ttu-id="1d200-282">Quand vous fournissez un **Nom du site**, le texte est automatiquement transféré vers la zone de texte **Pool d’applications**.</span><span class="sxs-lookup"><span data-stu-id="1d200-282">When you provide a **Site name**, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="1d200-283">Un pool d’applications est créé avec le nom du site quand vous ajoutez le site web.</span><span class="sxs-lookup"><span data-stu-id="1d200-283">A new application pool is created using the site name when you add the website.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="1d200-284">Identité du pool d’applications</span><span class="sxs-lookup"><span data-stu-id="1d200-284">Application Pool Identity</span></span>

<span data-ttu-id="1d200-285">Un compte d’identité du pool d’applications vous permet d’exécuter une application sous un compte unique sans avoir à créer et à gérer des domaines ou des comptes locaux.</span><span class="sxs-lookup"><span data-stu-id="1d200-285">An application pool identity account allows you to run an application under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="1d200-286">Sur IIS 8.0+, le processus Worker d’administration IIS (WAS) crée un compte virtuel avec le nom du nouveau pool d’applications et exécute les processus Worker du pool d’applications sous ce compte par défaut.</span><span class="sxs-lookup"><span data-stu-id="1d200-286">On IIS 8.0+, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new application pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="1d200-287">Dans la console de gestion IIS, sous **Paramètres avancés** pour votre pool d’applications, vérifiez que **l’Identité** est configurée pour utiliser **ApplicationPoolIdentity** comme indiqué dans l’image ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="1d200-287">In the IIS Management Console under **Advanced Settings** for your app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity** as shown in the image below.</span></span>

![Boîte de dialogue Paramètres avancés du pool applications](iis/_static/apppool-identity.png)

<span data-ttu-id="1d200-289">Le processus de gestion IIS crée un identificateur sécurisé avec le nom du pool d’applications dans le système de sécurité Windows.</span><span class="sxs-lookup"><span data-stu-id="1d200-289">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="1d200-290">Les ressources peuvent être sécurisées à l’aide de cette identité. Toutefois, cette identité n’est pas un compte d’utilisateur réel et n’apparaît pas dans la console de gestion d’utilisateur Windows.</span><span class="sxs-lookup"><span data-stu-id="1d200-290">Resources can be secured by using this identity; however, this identity isn't a real user account and won't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="1d200-291">Si vous devez accorder au processus Worker IIS un accès élevé à votre application, vous devez modifier la liste de contrôle d’accès (ACL) du répertoire contenant votre application.</span><span class="sxs-lookup"><span data-stu-id="1d200-291">If you need to grant the IIS worker process elevated access to your app, you must modify the Access Control List (ACL) for the directory containing your application.</span></span>

1. <span data-ttu-id="1d200-292">Ouvrez l’Explorateur Windows et accédez au répertoire.</span><span class="sxs-lookup"><span data-stu-id="1d200-292">Open Windows Explorer and navigate to the directory.</span></span>

2. <span data-ttu-id="1d200-293">Cliquez avec le bouton droit sur le répertoire et cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="1d200-293">Right click on the directory and click **Properties**.</span></span>

3. <span data-ttu-id="1d200-294">Sous l’onglet **Sécurité**, cliquez sur le bouton **Modifier**, puis sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="1d200-294">Under the **Security** tab, click the **Edit** button and then the **Add** button.</span></span>

4. <span data-ttu-id="1d200-295">Cliquez sur le bouton **Emplacements** et veillez à sélectionner votre système.</span><span class="sxs-lookup"><span data-stu-id="1d200-295">Click the **Locations** button and make sure you select your system.</span></span>

5. <span data-ttu-id="1d200-296">Entrez **IIS AppPool\DefaultAppPool** dans la zone de texte **Entrez les noms d’objets à sélectionner**.</span><span class="sxs-lookup"><span data-stu-id="1d200-296">Enter **IIS AppPool\DefaultAppPool** in **Enter the object names to select** textbox.</span></span>

  ![Boîte de dialogue de sélection d’utilisateurs ou de groupes pour le dossier d’application](iis/_static/select-users-or-groups-1.png)

6. <span data-ttu-id="1d200-298">Cliquez sur le bouton **Vérifier les noms**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="1d200-298">Click the **Check Names** button and then click **OK**.</span></span>

  ![Boîte de dialogue de sélection d’utilisateurs ou de groupes pour le dossier d’application](iis/_static/select-users-or-groups-2.png)

<span data-ttu-id="1d200-300">Vous pouvez également effectuer cette opération par le biais d’une invite de commandes à l’aide de l’outil **ICACLS** :</span><span class="sxs-lookup"><span data-stu-id="1d200-300">You can also do this via a command prompt using **ICACLS** tool:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

## <a name="troubleshooting-tips"></a><span data-ttu-id="1d200-301">Conseils de dépannage</span><span class="sxs-lookup"><span data-stu-id="1d200-301">Troubleshooting tips</span></span>

<span data-ttu-id="1d200-302">Pour diagnostiquer les problèmes de déploiement IIS :</span><span class="sxs-lookup"><span data-stu-id="1d200-302">To diagnose problems with IIS deployments:</span></span>

* <span data-ttu-id="1d200-303">Analysez la sortie du navigateur.</span><span class="sxs-lookup"><span data-stu-id="1d200-303">Study browser output.</span></span>
* <span data-ttu-id="1d200-304">Examinez le journal des **applications** du système avec **l’Observateur d’événements**.</span><span class="sxs-lookup"><span data-stu-id="1d200-304">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="1d200-305">Activez la journalisation `stdout`.</span><span class="sxs-lookup"><span data-stu-id="1d200-305">Enable `stdout` logging.</span></span> <span data-ttu-id="1d200-306">Le journal du **Module ASP.NET Core** se trouve dans le chemin fourni dans l’attribut *stdoutLogFile* de l’élément `<aspNetCore>` dans *web.config*. Tous les dossiers sur le chemin fourni dans la valeur d’attribut doivent exister dans le déploiement.</span><span class="sxs-lookup"><span data-stu-id="1d200-306">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="1d200-307">Vous devez également définir *stdoutLogEnabled="true"*.</span><span class="sxs-lookup"><span data-stu-id="1d200-307">You must also set *stdoutLogEnabled="true"*.</span></span> <span data-ttu-id="1d200-308">Les applications qui utilisent le SDK `Microsoft.NET.Sdk.Web` pour créer le fichier *web.config* affectent par défaut la valeur *false* à *stdoutLogEnabled*. Par conséquent, vous devez fournir le fichier *web.config* manuellement ou le modifier afin d’activer la journalisation `stdout`.</span><span class="sxs-lookup"><span data-stu-id="1d200-308">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to *false*, so you must manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="1d200-309">Plusieurs erreurs courantes n’apparaissent pas dans le navigateur, le journal des applications et le journal du Module ASP.NET Core tant que les valeurs *startupTimeLimit* (par défaut : 120 secondes) et *startupRetryCount* (par défaut : 2) du module ne sont pas dépassées.</span><span class="sxs-lookup"><span data-stu-id="1d200-309">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="1d200-310">Vous devez donc patienter six minutes avant d’en déduire que le module n’a pas réussi à démarrer un processus pour l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-310">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="1d200-311">Un moyen rapide de déterminer si l’application fonctionne correctement consiste à exécuter l’application directement sur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-311">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="1d200-312">Si l’application a été publiée sous forme de déploiement dépendant du framework, exécutez `dotnet my_application.dll` dans le dossier de déploiement, qui est le chemin physique IIS vers l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-312">If the app was published as a framework-dependent deployment (FDD), execute `dotnet my_application.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="1d200-313">Si l’application a été publiée sous forme de déploiement autonome, exécutez le fichier exécutable de l’application directement à partir d’une invite de commandes, `my_application.exe`, dans le dossier de déploiement.</span><span class="sxs-lookup"><span data-stu-id="1d200-313">If the app was published as a self-contained deployment (SCD), run the app's executable directly from a command prompt, `my_application.exe`, in the deployment folder.</span></span> <span data-ttu-id="1d200-314">Si Kestrel écoute sur le port par défaut 5000, vous devez pouvoir accéder à l’application via l’adresse `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="1d200-314">If Kestrel is listening on default port 5000, you should be able to browse the app at `http://localhost:5000/`.</span></span> <span data-ttu-id="1d200-315">Si l’application répond normalement à l’adresse de point de terminaison Kestrel, le problème est probablement lié à la configuration IIS-Module ASP.NET Core-Kestrel plutôt qu’à l’application proprement dite.</span><span class="sxs-lookup"><span data-stu-id="1d200-315">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the IIS-ASP.NET Core Module-Kestrel configuration and less likely within the app itself.</span></span>

<span data-ttu-id="1d200-316">Pour déterminer si le proxy inverse IIS pour le serveur Kestrel fonctionne correctement, vous pouvez envoyer une demande de fichier statique simple pour une feuille de style, un script ou une image à partir des fichiers statiques de l’application dans *wwwroot* à l’aide de [l’intergiciel (middleware) de fichiers statiques](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="1d200-316">One way to determine if the IIS reverse proxy to the Kestrel server is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="1d200-317">Si l’application peut traiter les fichiers statiques, mais que les vues MVC et autres points de terminaison échouent, le problème est sans doute lié à l’application proprement dite (par exemple, routage MVC ou Erreur de serveur interne 500) plutôt qu’à la configuration IIS-Module ASP.NET Core-Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-317">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the IIS-ASP.NET Core Module-Kestrel configuration and more likely within the app itself (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="1d200-318">Quand Kestrel démarre normalement derrière IIS, mais que l’application ne s’exécute pas sur le système après s’être exécutée correctement localement, vous pouvez ajouter temporairement une variable d’environnement *web.config* pour affecter la valeur `Development` à `ASPNETCORE_ENVIRONMENT`.</span><span class="sxs-lookup"><span data-stu-id="1d200-318">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, you can temporarily add an environment variable to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="1d200-319">Si vous ne substituez pas l’environnement de démarrage de l’application, cela permet à la [page d’exception de développeur](xref:fundamentals/error-handling) de s’afficher quand l’application est exécutée sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-319">As long as you don't override the environment in app startup, this allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run on the system.</span></span> <span data-ttu-id="1d200-320">La définition de la variable d’environnement `ASPNETCORE_ENVIRONMENT` de cette façon est recommandée uniquement pour les systèmes de préproduction et de test qui ne sont pas exposés à Internet.</span><span class="sxs-lookup"><span data-stu-id="1d200-320">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing systems that aren't exposed to the Internet.</span></span> <span data-ttu-id="1d200-321">Veillez à supprimer la variable d’environnement du fichier *web.config* une fois que vous avez terminé.</span><span class="sxs-lookup"><span data-stu-id="1d200-321">Be sure you remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="1d200-322">Pour plus d’informations sur la définition des variables d’environnement par le biais de *web.config* pour le proxy inverse, consultez la section sur [l’élément enfant environmentVariables d’aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="1d200-322">For information on setting environment variables via *web.config* for the reverse proxy, see [environmentVariables child element of aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="1d200-323">Dans la plupart des cas, l’activation de la journalisation de l’application aide à résoudre les problèmes liés à l’application ou au proxy inverse.</span><span class="sxs-lookup"><span data-stu-id="1d200-323">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="1d200-324">Pour plus d’informations, consultez [Journalisation](xref:fundamentals/logging/index).</span><span class="sxs-lookup"><span data-stu-id="1d200-324">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="1d200-325">Notre dernier conseil de dépannage concerne les applications dont l’exécution échoue après la mise à niveau du SDK .NET Core sur l’ordinateur de développement ou des versions de package dans l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-325">Our last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="1d200-326">Dans certains cas, les packages incohérents peuvent bloquer une application quand vous effectuez des mises à niveau majeures.</span><span class="sxs-lookup"><span data-stu-id="1d200-326">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="1d200-327">Vous pouvez résoudre la plupart de ces problèmes en supprimant les dossiers `bin` et `obj` du projet, en effaçant les caches de package `%UserProfile%\.nuget\packages\` et `%LocalAppData%\Nuget\v3-cache`, en restaurant le projet et en vérifiant que votre déploiement préalable sur le système a été supprimé complètement avant de redéployer l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-327">You can fix most of these issues by deleting the `bin` and `obj` folders in the project, clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`, restoring the project, and confirming that your prior deployment on the system has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="1d200-328">Un moyen pratique d’effacer les caches de package consiste à obtenir l’outil *NuGet.exe* à partir de [NuGet.org](https://www.nuget.org/), l’ajouter à votre variable système PATH et exécuter `nuget locals all -clear` à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="1d200-328">A convenient way to clear package caches is to obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/), add it to your system PATH, and execute `nuget locals all -clear` from a command prompt.</span></span> <span data-ttu-id="1d200-329">Vous pouvez également exécuter la commande `dotnet nuget locals all --clear` à partir d’une invite de commandes sans obtenir *NuGet.exe*.</span><span class="sxs-lookup"><span data-stu-id="1d200-329">You can also execute the `dotnet nuget locals all --clear` command from a command prompt without obtaining *NuGet.exe*.</span></span>

## <a name="common-errors"></a><span data-ttu-id="1d200-330">Erreurs courantes</span><span class="sxs-lookup"><span data-stu-id="1d200-330">Common errors</span></span>

<span data-ttu-id="1d200-331">Cette liste d’erreurs n’est pas exhaustive.</span><span class="sxs-lookup"><span data-stu-id="1d200-331">The following isn't a complete list of errors.</span></span> <span data-ttu-id="1d200-332">Si vous rencontrez une erreur non répertoriée ici, veuillez laisser un message d’erreur détaillé dans la section Commentaires ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="1d200-332">Should you encounter an error not listed here, please leave a detailed error message in the comments section below.</span></span>

### <a name="installer-unable-to-obtain-vc-redistributable"></a><span data-ttu-id="1d200-333">Le programme d’installation ne parvient pas à obtenir VC++ Redistributable</span><span class="sxs-lookup"><span data-stu-id="1d200-333">Installer unable to obtain VC++ Redistributable</span></span>

* <span data-ttu-id="1d200-334">**Exception de programme d’installation :** 0x80072efd ou 0x80072f76 - Erreur non spécifiée</span><span class="sxs-lookup"><span data-stu-id="1d200-334">**Installer Exception:** 0x80072efd or 0x80072f76 - Unspecified error</span></span>

* <span data-ttu-id="1d200-335">**Exception du journal d’installation&#8224;:** Erreur 0x80072efd ou 0x80072f76 : Impossible d’exécuter le package EXE</span><span class="sxs-lookup"><span data-stu-id="1d200-335">**Installer Log Exception&#8224;:** Error 0x80072efd or 0x80072f76: Failed to execute EXE package</span></span>

  <span data-ttu-id="1d200-336">&#8224;Le journal se trouve dans C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span><span class="sxs-lookup"><span data-stu-id="1d200-336">&#8224;The log is located at C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span></span>

<span data-ttu-id="1d200-337">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-337">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-338">Si le système n’a pas accès à Internet lors de l’installation du bundle d’hébergement du serveur, cette exception se produit quand le programme d’installation ne peut pas obtenir *Microsoft Visual C++ 2015 Redistributable*.</span><span class="sxs-lookup"><span data-stu-id="1d200-338">If the system doesn't have Internet access while installing the server hosting bundle, this exception occurs when the installer is prevented from obtaining the *Microsoft Visual C++ 2015 Redistributable*.</span></span> <span data-ttu-id="1d200-339">Vous pouvez obtenir un programme d’installation à partir du [Centre de téléchargement Microsoft](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="1d200-339">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span> <span data-ttu-id="1d200-340">Si le programme d’installation échoue, vous risquez de ne pas recevoir le runtime .NET Core nécessaire pour héberger un déploiement dépendant du framework.</span><span class="sxs-lookup"><span data-stu-id="1d200-340">If the installer fails, you may not receive the .NET Core runtime required to host a framework-dependent deployment (FDD).</span></span> <span data-ttu-id="1d200-341">Si vous envisagez d’héberger un déploiement dépendant du framework, vérifiez que le runtime est installé dans Programmes &amp; Fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1d200-341">If you plan to host an FDD, confirm that the runtime is installed in Programs &amp; Features.</span></span> <span data-ttu-id="1d200-342">Vous pouvez obtenir un programme d’installation du runtime à partir de [Téléchargements .NET](https://www.microsoft.com/net/download/core).</span><span class="sxs-lookup"><span data-stu-id="1d200-342">You may obtain a runtime installer from [.NET Downloads](https://www.microsoft.com/net/download/core).</span></span> <span data-ttu-id="1d200-343">Après avoir installé le runtime, redémarrez le système ou IIS en exécutant **net stop was /y** suivi de **net start w3svc** à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="1d200-343">After installing the runtime, restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

### <a name="os-upgrade-removed-the-32-bit-aspnet-core-module"></a><span data-ttu-id="1d200-344">La mise à niveau du système d’exploitation a supprimé le Module ASP.NET Core 32 bits</span><span class="sxs-lookup"><span data-stu-id="1d200-344">OS upgrade removed the 32-bit ASP.NET Core Module</span></span>

* <span data-ttu-id="1d200-345">**Journal des applications :** Le fichier DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** du module n’a pas pu se charger.</span><span class="sxs-lookup"><span data-stu-id="1d200-345">**Application Log:** The Module DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** failed to load.</span></span> <span data-ttu-id="1d200-346">Les données sont erronées.</span><span class="sxs-lookup"><span data-stu-id="1d200-346">The data is the error.</span></span>

<span data-ttu-id="1d200-347">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-347">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-348">Les fichiers autres que les fichiers de système d’exploitation dans le répertoire **C:\Windows\SysWOW64\inetsrv** ne sont pas conservés pendant la mise à niveau du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="1d200-348">Non-OS files in the **C:\Windows\SysWOW64\inetsrv** directory aren't preserved during an OS upgrade.</span></span> <span data-ttu-id="1d200-349">Si vous avez installé le Module ASP.NET Core avant la mise à niveau du système d’exploitation et que vous essayez ensuite d’exécuter un pool d’applications en mode 32 bits après une mise à niveau du système d’exploitation, ce problème se produit.</span><span class="sxs-lookup"><span data-stu-id="1d200-349">If you have the ASP.NET Core Module installed prior to an OS upgrade and then try to run any AppPool in 32-bit mode after an OS upgrade, you encounter this issue.</span></span> <span data-ttu-id="1d200-350">Après une mise à niveau du système d’exploitation, réparez le Module ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1d200-350">After an OS upgrade, repair the ASP.NET Core Module.</span></span> <span data-ttu-id="1d200-351">Consultez [Installer le bundle d’hébergement .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="1d200-351">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="1d200-352">Sélectionnez **Réparer** quand vous exécutez le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="1d200-352">Select **Repair** when you run the installer.</span></span>

### <a name="platform-conflicts-with-rid"></a><span data-ttu-id="1d200-353">Conflits de plateforme avec RID</span><span class="sxs-lookup"><span data-stu-id="1d200-353">Platform conflicts with RID</span></span>

* <span data-ttu-id="1d200-354">**Navigateur :** Erreur HTTP 502.5 - Échec du processus</span><span class="sxs-lookup"><span data-stu-id="1d200-354">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="1d200-355">**Journal des applications :** L’application « MACHINE/WEBROOT/APPHOST/MY_APPLICATION » avec la racine physique 'C:\{PATH}\' n’a pas pu démarrer le processus avec la ligne de commande '« C:\\{PATH}\my_application.{exe|dll} » ', Code d’erreur = 0x80004005 : ff.</span><span class="sxs-lookup"><span data-stu-id="1d200-355">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\{PATH}\' failed to start process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ', ErrorCode = '0x80004005 : ff.</span></span>

* <span data-ttu-id="1d200-356">**Journal du Module ASP.NET Core :** Exception non gérée : System.BadImageFormatException : Impossible de charger le fichier ou l’assembly « my_application.dll ».</span><span class="sxs-lookup"><span data-stu-id="1d200-356">**ASP.NET Core Module Log:** Unhandled Exception: System.BadImageFormatException: Could not load file or assembly 'my_application.dll'.</span></span> <span data-ttu-id="1d200-357">Tentative de chargement d’un programme au format incorrect.</span><span class="sxs-lookup"><span data-stu-id="1d200-357">An attempt was made to load a program with an incorrect format.</span></span>

<span data-ttu-id="1d200-358">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-358">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-359">Vérifiez que l’application s’exécute localement sur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-359">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="1d200-360">Un échec de processus peut être dû à un problème au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-360">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="1d200-361">Pour plus d’informations, consultez [Conseils de dépannage](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="1d200-361">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="1d200-362">Vérifiez que vous n’avez pas défini un `<PlatformTarget>` dans votre *.csproj* qui est en conflit avec le RID.</span><span class="sxs-lookup"><span data-stu-id="1d200-362">Confirm that you didn't set a `<PlatformTarget>` in your *.csproj* that conflicts with the RID.</span></span> <span data-ttu-id="1d200-363">Par exemple, ne spécifiez pas `x86` comme `<PlatformTarget>` et en publiant avec un RID `win10-x64`, à l’aide de *dotnet publish -c Release -r win10-x64* ou en affectant la valeur `win10-x64` à `<RuntimeIdentifiers>` dans votre *.csproj*.</span><span class="sxs-lookup"><span data-stu-id="1d200-363">For example, don't specify a `<PlatformTarget>` of `x86` and publish with an RID of `win10-x64`, either by using *dotnet publish -c Release -r win10-x64* or by setting the `<RuntimeIdentifiers>` in your *.csproj* to `win10-x64`.</span></span> <span data-ttu-id="1d200-364">Le projet est publié sans avertissement ni erreur, mais il échoue avec les exceptions journalisées ci-dessus sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-364">The project publishes without warning or error but fails with the above logged exceptions on the system.</span></span>

* <span data-ttu-id="1d200-365">Si cette exception se produit pour un déploiement d’applications Azure lors de la mise à niveau d’une application et du déploiement de nouveaux assemblys, supprimez manuellement tous les fichiers du déploiement précédent.</span><span class="sxs-lookup"><span data-stu-id="1d200-365">If this exception occurs for an Azure Apps deployment when upgrading an application and deploying newer assemblies, manually delete all files from the prior deployment.</span></span> <span data-ttu-id="1d200-366">Le fait de laisser des assemblys incompatibles peut provoquer une exception `System.BadImageFormatException` lors du déploiement d’une application mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="1d200-366">Lingering incompatible assemblies can result in a `System.BadImageFormatException` exception when deploying an upgraded app.</span></span>

### <a name="uri-endpoint-wrong-or-stopped-website"></a><span data-ttu-id="1d200-367">Point de terminaison d’URI incorrect ou site web arrêté</span><span class="sxs-lookup"><span data-stu-id="1d200-367">URI endpoint wrong or stopped website</span></span>

* <span data-ttu-id="1d200-368">**Navigateur :** ERR_CONNECTION_REFUSED</span><span class="sxs-lookup"><span data-stu-id="1d200-368">**Browser:** ERR_CONNECTION_REFUSED</span></span>

* <span data-ttu-id="1d200-369">**Journal des applications :** Aucune entrée</span><span class="sxs-lookup"><span data-stu-id="1d200-369">**Application Log:** No entry</span></span>

* <span data-ttu-id="1d200-370">**Journal du Module ASP.NET Core :** Fichier journal non créé</span><span class="sxs-lookup"><span data-stu-id="1d200-370">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="1d200-371">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-371">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-372">Vérifiez que vous utilisez le point de terminaison d’URI correct pour l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-372">Confirm you are using the correct URI endpoint for the application.</span></span> <span data-ttu-id="1d200-373">Vérifiez vos liaisons.</span><span class="sxs-lookup"><span data-stu-id="1d200-373">Check your bindings.</span></span>

* <span data-ttu-id="1d200-374">Vérifiez que le site web IIS n’est pas à l’état *Arrêté*.</span><span class="sxs-lookup"><span data-stu-id="1d200-374">Confirm that the IIS website is not in the *Stopped* state.</span></span>

### <a name="corewebengine-or-w3svc-server-features-disabled"></a><span data-ttu-id="1d200-375">Fonctionnalités de serveur W3SVC ou CoreWebEngine désactivées</span><span class="sxs-lookup"><span data-stu-id="1d200-375">CoreWebEngine or W3SVC server features disabled</span></span>

* <span data-ttu-id="1d200-376">**Exception de système d’exploitation :** Les fonctionnalités CoreWebEngine et W3SVC d’IIS 7.0 doivent être installées pour utiliser le Module ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1d200-376">**OS Exception:** The IIS 7.0 CoreWebEngine and W3SVC features must be installed to use the ASP.NET Core Module.</span></span>

<span data-ttu-id="1d200-377">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-377">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-378">Vérifiez que vous avez activé le rôle et les fonctionnalités appropriés.</span><span class="sxs-lookup"><span data-stu-id="1d200-378">Confirm that you have enabled the proper role and features.</span></span> <span data-ttu-id="1d200-379">Consultez [Configuration d’IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="1d200-379">See [IIS Configuration](#iis-configuration).</span></span>

### <a name="incorrect-website-physical-path-or-application-missing"></a><span data-ttu-id="1d200-380">Chemin physique de site web incorrect ou application manquante</span><span class="sxs-lookup"><span data-stu-id="1d200-380">Incorrect website physical path or application missing</span></span>

* <span data-ttu-id="1d200-381">**Navigateur :** 403 - Interdit : accès refusé **--ou--** 403.14 - Interdit : Le serveur Web est configuré pour ne pas afficher le contenu de ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="1d200-381">**Browser:** 403 Forbidden - Access is denied **--OR--** 403.14 Forbidden - The Web server is configured to not list the contents of this directory.</span></span>

* <span data-ttu-id="1d200-382">**Journal des applications :** Aucune entrée</span><span class="sxs-lookup"><span data-stu-id="1d200-382">**Application Log:** No entry</span></span>

* <span data-ttu-id="1d200-383">**Journal du Module ASP.NET Core :** Fichier journal non créé</span><span class="sxs-lookup"><span data-stu-id="1d200-383">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="1d200-384">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-384">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-385">Consultez les **Paramètres de base** du site web IIS et le dossier d’application physique.</span><span class="sxs-lookup"><span data-stu-id="1d200-385">Check the IIS website **Basic Settings** and the physical application folder.</span></span> <span data-ttu-id="1d200-386">Vérifiez que l’application est dans le dossier sur le **chemin physique** du site web IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-386">Confirm that the application is in the folder at the IIS website **Physical path**.</span></span>

### <a name="incorrect-role-module-not-installed-or-incorrect-permissions"></a><span data-ttu-id="1d200-387">Rôle incorrect, module non installé ou autorisations incorrectes</span><span class="sxs-lookup"><span data-stu-id="1d200-387">Incorrect role, module not installed, or incorrect permissions</span></span>

* <span data-ttu-id="1d200-388">**Navigateur :** 500.19 Erreur interne du serveur : Impossible d’accéder à la page que vous avez demandée, car les données de configuration connexes relatives à la page ne sont pas valides.</span><span class="sxs-lookup"><span data-stu-id="1d200-388">**Browser:** 500.19 Internal Server Error - The requested page cannot be accessed because the related configuration data for the page is invalid.</span></span>

* <span data-ttu-id="1d200-389">**Journal des applications :** Aucune entrée</span><span class="sxs-lookup"><span data-stu-id="1d200-389">**Application Log:** No entry</span></span>

* <span data-ttu-id="1d200-390">**Journal du Module ASP.NET Core :** Fichier journal non créé</span><span class="sxs-lookup"><span data-stu-id="1d200-390">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="1d200-391">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-391">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-392">Vérifiez que vous avez activé le rôle approprié.</span><span class="sxs-lookup"><span data-stu-id="1d200-392">Confirm that you've enabled the proper role.</span></span> <span data-ttu-id="1d200-393">Consultez [Configuration d’IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="1d200-393">See [IIS Configuration](#iis-configuration).</span></span>

* <span data-ttu-id="1d200-394">Accédez à **Programmes &amp; Fonctionnalités** et vérifiez que le **Module Microsoft ASP.NET Core** a été installé.</span><span class="sxs-lookup"><span data-stu-id="1d200-394">Check **Programs &amp; Features** and confirm that the **Microsoft ASP.NET Core Module** has been installed.</span></span> <span data-ttu-id="1d200-395">Si le **Module Microsoft ASP.NET Core** n’est pas présent dans la liste des programmes installés, installez-le.</span><span class="sxs-lookup"><span data-stu-id="1d200-395">If the **Microsoft ASP.NET Core Module** isn't present in the list of installed programs, install the module.</span></span> <span data-ttu-id="1d200-396">Consultez [Installer le bundle d’hébergement .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="1d200-396">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span>

* <span data-ttu-id="1d200-397">Vérifiez que **Pool d’applications** > **Modèle de processus** > **Identité** a la valeur **ApplicationPoolIdentity** ou que votre identité personnalisée dispose des autorisations appropriées pour accéder au dossier de déploiement de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-397">Make sure that the **Application Pool** > **Process Model** > **Identity** is set to **ApplicationPoolIdentity** or your custom identity has the correct permissions to access the app's deployment folder.</span></span>

### <a name="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation"></a><span data-ttu-id="1d200-398">processPath incorrect, variable de chemin manquante, bundle d’hébergement non installé, système/IIS non redémarré, VC++ Redistributable non installé ou violation d’accès dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="1d200-398">Incorrect processPath, missing PATH variable, hosting bundle not installed, system/IIS not restarted, VC++ Redistributable not installed, or dotnet.exe access violation</span></span>

* <span data-ttu-id="1d200-399">**Navigateur :** Erreur HTTP 502.5 - Échec du processus</span><span class="sxs-lookup"><span data-stu-id="1d200-399">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="1d200-400">**Journal des applications :** L’application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' avec la racine physique 'C:\\{PATH}\' n’a pas pu démarrer le processus avec la ligne de commande' « .\my_application.exe » ', Code d’erreur = '0x80070002 : 0.</span><span class="sxs-lookup"><span data-stu-id="1d200-400">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '".\my_application.exe" ', ErrorCode = '0x80070002 : 0.</span></span>

* <span data-ttu-id="1d200-401">**Journal du Module ASP.NET Core :** Fichier journal créé mais vide</span><span class="sxs-lookup"><span data-stu-id="1d200-401">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="1d200-402">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-402">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-403">Vérifiez que l’application s’exécute localement sur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-403">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="1d200-404">Un échec de processus peut être dû à un problème au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-404">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="1d200-405">Pour plus d’informations, consultez [Conseils de dépannage](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="1d200-405">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="1d200-406">Vérifiez l’attribut *processPath* de l’élément `<aspNetCore>` dans *web.config* pour confirmer qu’il s’agit de *dotnet* pour un déploiement dépendant du framework ou de *.\my_application.exe* pour un déploiement autonome.</span><span class="sxs-lookup"><span data-stu-id="1d200-406">Check the *processPath* attribute on the `<aspNetCore>` element in *web.config* to confirm that it's *dotnet* for a framework-dependent deployment (FDD) or *.\my_application.exe* for a self-contained deployment (SCD).</span></span>

* <span data-ttu-id="1d200-407">Pour un déploiement dépendant du framework, *dotnet.exe* peut ne pas être accessible via les paramètres PATH.</span><span class="sxs-lookup"><span data-stu-id="1d200-407">For an FDD, *dotnet.exe* might not be accessible via the PATH settings.</span></span> <span data-ttu-id="1d200-408">Vérifiez que *C:\Program Files\dotnet\* existe dans les paramètres PATH du système.</span><span class="sxs-lookup"><span data-stu-id="1d200-408">Confirm that *C:\Program Files\dotnet\* exists in the System PATH settings.</span></span>

* <span data-ttu-id="1d200-409">Pour un déploiement dépendant du framework, *dotnet.exe* peut ne pas être accessible pour l’identité d’utilisateur du pool d’applications.</span><span class="sxs-lookup"><span data-stu-id="1d200-409">For an FDD, *dotnet.exe* might not be accessible for the user identity of the Application Pool.</span></span> <span data-ttu-id="1d200-410">Vérifiez que l’identité utilisateur du pool d’applications a accès au répertoire *C:\Program Files\dotnet*.</span><span class="sxs-lookup"><span data-stu-id="1d200-410">Confirm that the AppPool user identity has access to the *C:\Program Files\dotnet* directory.</span></span> <span data-ttu-id="1d200-411">Vérifiez qu’aucune règle de refus d’accès n’est configurée pour l’identité utilisateur du pool d’applications sur les répertoires *C:\Program Files\dotnet* et d’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-411">Confirm that there are no deny rules configured for the AppPool user identity on the *C:\Program Files\dotnet* and application directories.</span></span>

* <span data-ttu-id="1d200-412">Vous avez peut-être déployé un déploiement dépendant du framework et installé .NET Core sans redémarrer IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-412">You may have deployed an FDD and installed .NET Core without restarting IIS.</span></span> <span data-ttu-id="1d200-413">Redémarrez le serveur ou IIS en exécutant **net stop was /y** suivi de **net start w3svc** à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="1d200-413">Either restart the server or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="1d200-414">Vous avez peut-être déployé un déploiement dépendant du framework sans installer le runtime .NET Core sur le système hôte.</span><span class="sxs-lookup"><span data-stu-id="1d200-414">You may have deployed an FDD without installing the .NET Core runtime on the hosting system.</span></span> <span data-ttu-id="1d200-415">Si vous tentez de déployer un déploiement dépendant du framework et que vous n’avez pas installé le runtime .NET Core, exécutez le **programme d’installation du bundle d’hébergement .NET Core Windows Server** sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-415">If you're attempting to deploy a FDD and haven't installed the .NET Core runtime, run the **.NET Core Windows Server Hosting bundle installer** on the system.</span></span> <span data-ttu-id="1d200-416">Consultez [Installer le bundle d’hébergement .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="1d200-416">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="1d200-417">Si vous essayez d’installer le runtime .NET Core sur un système sans connexion Internet, obtenez le runtime à partir de [Téléchargements .NET](https://www.microsoft.com/net/download/core) et exécutez le programme d’installation du bundle d’hébergement pour installer le Module ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1d200-417">If you're attempting to install the .NET Core runtime on a system without an Internet connection, obtain the runtime from [.NET Downloads](https://www.microsoft.com/net/download/core) and run the hosting bundle installer to install the ASP.NET Core Module.</span></span> <span data-ttu-id="1d200-418">Terminez l’installation en redémarrant le système ou IIS en exécutant **net stop was /y** suivi de **net start w3svc** à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="1d200-418">Complete the installation by restarting the system or restarting IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="1d200-419">Vous avez peut-être déployé un déploiement dépendant du framework et installé .NET Core sans redémarrer le système/IIS.</span><span class="sxs-lookup"><span data-stu-id="1d200-419">You may have deployed an FDD and installed .NET Core without restarting the system/IIS.</span></span> <span data-ttu-id="1d200-420">Redémarrez le système ou IIS en exécutant **net stop was /y** suivi de **net start w3svc** à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="1d200-420">Either restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="1d200-421">Vous avez peut-être déployé un déploiement dépendant du framework et *Microsoft Visual C++ 2015 Redistributable (x64)* n’est pas installé sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-421">You may have deployed an FDD and the *Microsoft Visual C++ 2015 Redistributable (x64)* is not installed on the system.</span></span> <span data-ttu-id="1d200-422">Vous pouvez obtenir un programme d’installation à partir du [Centre de téléchargement Microsoft](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="1d200-422">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span>

### <a name="incorrect-arguments-of-aspnetcore-element"></a><span data-ttu-id="1d200-423">Arguments incorrects de l’élément \<aspNetCore\></span><span class="sxs-lookup"><span data-stu-id="1d200-423">Incorrect arguments of \<aspNetCore\> element</span></span>

* <span data-ttu-id="1d200-424">**Navigateur :** Erreur HTTP 502.5 - Échec du processus</span><span class="sxs-lookup"><span data-stu-id="1d200-424">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="1d200-425">**Journal des applications :** L’application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' avec la racine physique 'C:\\{PATH}\' n’a pas pu démarrer le processus avec la ligne de commande' « dotnet » .\my_application.dll » ', Code d’erreur = '0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="1d200-425">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="1d200-426">**Journal du Module ASP.NET Core :** L’application à exécuter n’existe pas : 'PATH\my_application.dll'</span><span class="sxs-lookup"><span data-stu-id="1d200-426">**ASP.NET Core Module Log:** The application to execute does not exist: 'PATH\my_application.dll'</span></span>

<span data-ttu-id="1d200-427">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-427">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-428">Vérifiez que l’application s’exécute localement sur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-428">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="1d200-429">Un échec de processus peut être dû à un problème au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-429">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="1d200-430">Pour plus d’informations, consultez [Conseils de dépannage](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="1d200-430">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="1d200-431">Examinez l’attribut *arguments* de l’élément `<aspNetCore>` dans *web.config* pour confirmer (a) qu’il s’agit de *.\my_application.dll* pour un déploiement dépendant du framework, ou (b) qu’il est absent ou qu’il s’agit d’une chaîne vide (*arguments=""*) ou d’une liste d’arguments de votre application (*arguments="arg1, arg2, ..."*) pour un déploiement autonome.</span><span class="sxs-lookup"><span data-stu-id="1d200-431">Examine the *arguments* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is either (a) *.\my_application.dll* for a framework-dependent deployment (FDD); or (b) not present, an empty string (*arguments=""*), or a list of your app's arguments (*arguments="arg1, arg2, ..."*) for a self-contained deployment (SCD).</span></span>

### <a name="missing-net-framework-version"></a><span data-ttu-id="1d200-432">Version du .NET Framework manquante</span><span class="sxs-lookup"><span data-stu-id="1d200-432">Missing .NET Framework version</span></span>

* <span data-ttu-id="1d200-433">**Navigateur :** 502.3 Passerelle incorrecte : Une erreur de connexion s’est produite lors de la tentative de routage de la requête.</span><span class="sxs-lookup"><span data-stu-id="1d200-433">**Browser:** 502.3 Bad Gateway - There was a connection error while trying to route the request.</span></span>

* <span data-ttu-id="1d200-434">**Journal des applications :** Code d’erreur = L’application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' avec la racine physique 'C:\\{PATH}\' n’a pas pu démarrer le processus avec la ligne de commande' « dotnet » .\my_application.dll » ', Code d’erreur = '0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="1d200-434">**Application Log:** ErrorCode = Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="1d200-435">**Journal du Module ASP.NET Core :** Exception d’assembly, de méthode ou de fichier manquante.</span><span class="sxs-lookup"><span data-stu-id="1d200-435">**ASP.NET Core Module Log:** Missing method, file, or assembly exception.</span></span> <span data-ttu-id="1d200-436">La méthode, le fichier ou l’assembly spécifié dans l’exception est une méthode, un fichier ou un assembly .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1d200-436">The method, file, or assembly specified in the exception is a .NET Framework method, file, or assembly.</span></span>

<span data-ttu-id="1d200-437">Résolution des problèmes :</span><span class="sxs-lookup"><span data-stu-id="1d200-437">Troubleshooting:</span></span>

* <span data-ttu-id="1d200-438">Installez la version de .NET Framework manquante sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-438">Install the .NET Framework version missing from the system.</span></span>

* <span data-ttu-id="1d200-439">Pour un déploiement dépendant du framework, vérifiez que le runtime approprié est installé sur le système.</span><span class="sxs-lookup"><span data-stu-id="1d200-439">For a framework-dependent deployment (FDD), confirm that you have the correct runtime installed on the system.</span></span> <span data-ttu-id="1d200-440">Si vous mettez à niveau un projet de la version 1.1 vers la version 2.0, que vous le déployez sur le système d’hébergement et que vous recevez cette exception, vérifiez que la version 2.0 du framework est installée sur le système hôte.</span><span class="sxs-lookup"><span data-stu-id="1d200-440">If you upgrade a project from 1.1 to 2.0, deploy to the hosting system, and receive this exception, ensure you install the 2.0 framework on the hosting system.</span></span>

### <a name="stopped-application-pool"></a><span data-ttu-id="1d200-441">Pool d’applications arrêté</span><span class="sxs-lookup"><span data-stu-id="1d200-441">Stopped Application Pool</span></span>

* <span data-ttu-id="1d200-442">**Navigateur :** 503 Service non disponible</span><span class="sxs-lookup"><span data-stu-id="1d200-442">**Browser:** 503 Service Unavailable</span></span>

* <span data-ttu-id="1d200-443">**Journal des applications :** Aucune entrée</span><span class="sxs-lookup"><span data-stu-id="1d200-443">**Application Log:** No entry</span></span>

* <span data-ttu-id="1d200-444">**Journal du Module ASP.NET Core :** Fichier journal non créé</span><span class="sxs-lookup"><span data-stu-id="1d200-444">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="1d200-445">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="1d200-445">Troubleshooting</span></span>

* <span data-ttu-id="1d200-446">Vérifiez que le pool d’applications n’est pas à l’état *Arrêté*.</span><span class="sxs-lookup"><span data-stu-id="1d200-446">Confirm that the Application Pool is not in the *Stopped* state.</span></span>

### <a name="iis-integration-middleware-not-implemented"></a><span data-ttu-id="1d200-447">L’intergiciel d’intégration IIS n’est pas implémenté</span><span class="sxs-lookup"><span data-stu-id="1d200-447">IIS Integration middleware not implemented</span></span>

* <span data-ttu-id="1d200-448">**Navigateur :** Erreur HTTP 502.5 - Échec du processus</span><span class="sxs-lookup"><span data-stu-id="1d200-448">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="1d200-449">**Journal des applications :** L’application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' avec racine physique 'C:\\{PATH}\' a créé des processus avec la ligne de commande '« C:\\{PATH}\my_application.{exe|dll} » ' mais s’est bloquée ou n’a pas répondu ou écouté sur le port spécifié '{PORT}', Code d’erreur = '0x800705b4'</span><span class="sxs-lookup"><span data-stu-id="1d200-449">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="1d200-450">**Journal du Module ASP.NET Core :** Fichier journal créé et indiquant un fonctionnement normal.</span><span class="sxs-lookup"><span data-stu-id="1d200-450">**ASP.NET Core Module Log:** Log file created and shows normal operation.</span></span>

<span data-ttu-id="1d200-451">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="1d200-451">Troubleshooting</span></span>

* <span data-ttu-id="1d200-452">Vérifiez que l’application s’exécute localement sur Kestrel.</span><span class="sxs-lookup"><span data-stu-id="1d200-452">Confirm that the app runs locally on Kestrel.</span></span> <span data-ttu-id="1d200-453">Un échec de processus peut être dû à un problème au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-453">A process failure might be the result of a problem within the app.</span></span> <span data-ttu-id="1d200-454">Pour plus d’informations, consultez [Conseils de dépannage](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="1d200-454">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="1d200-455">Vérifiez que vous avez référencé correctement l’intergiciel (middleware) d’intégration IIS en appelant la méthode *.UseIISIntegration()* sur le *WebHostBuilder()* de l’application (ASP.NET Core 1.x) ou la méthode `CreateDefaultBuilder` (ASP.NET Core 2.x).</span><span class="sxs-lookup"><span data-stu-id="1d200-455">Confirm that you've correctly referenced the IIS Integration middleware by calling the *.UseIISIntegration()* method on the application's *WebHostBuilder()* (ASP.NET Core 1.x) or used the `CreateDefaultBuilder` method (ASP.NET Core 2.x).</span></span> <span data-ttu-id="1d200-456">Consultez [Hébergement dans ASP.NET Core](xref:fundamentals/hosting) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="1d200-456">See [Hosting in ASP.NET Core](xref:fundamentals/hosting) for details.</span></span>

### <a name="sub-application-includes-a-handlers-section"></a><span data-ttu-id="1d200-457">La sous-application inclut une section \<handlers\></span><span class="sxs-lookup"><span data-stu-id="1d200-457">Sub-application includes a \<handlers\> section</span></span>

* <span data-ttu-id="1d200-458">**Navigateur :** Erreur HTTP 500.19 : Erreur interne du serveur</span><span class="sxs-lookup"><span data-stu-id="1d200-458">**Browser:** HTTP Error 500.19 - Internal Server Error</span></span>

* <span data-ttu-id="1d200-459">**Journal des applications :** Aucune entrée</span><span class="sxs-lookup"><span data-stu-id="1d200-459">**Application Log:** No entry</span></span>

* <span data-ttu-id="1d200-460">**Journal du Module ASP.NET Core :** Fichier journal créé et indiquant un fonctionnement normal pour l’application racine.</span><span class="sxs-lookup"><span data-stu-id="1d200-460">**ASP.NET Core Module Log:** Log file created and shows normal operation for the root application.</span></span> <span data-ttu-id="1d200-461">Fichier journal non créé pour la sous-application.</span><span class="sxs-lookup"><span data-stu-id="1d200-461">Log file not created for the sub-application.</span></span>

<span data-ttu-id="1d200-462">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="1d200-462">Troubleshooting</span></span>

* <span data-ttu-id="1d200-463">Vérifiez que le fichier *web.config* de la sous-application n’inclut pas de section `<handlers>`.</span><span class="sxs-lookup"><span data-stu-id="1d200-463">Confirm that the sub-app's *web.config* file doesn't include a `<handlers>` section.</span></span>

### <a name="application-configuration-general-issue"></a><span data-ttu-id="1d200-464">Problème général lié à la configuration d’application</span><span class="sxs-lookup"><span data-stu-id="1d200-464">Application configuration general issue</span></span>

* <span data-ttu-id="1d200-465">**Navigateur :** Erreur HTTP 502.5 - Échec du processus</span><span class="sxs-lookup"><span data-stu-id="1d200-465">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="1d200-466">**Journal des applications :** L’application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' avec racine physique 'C:\\{PATH}\' a créé des processus avec la ligne de commande '« C:\\{PATH}\my_application.{exe|dll} » ' mais s’est bloquée ou n’a pas répondu ou écouté sur le port spécifié '{PORT}', Code d’erreur = '0x800705b4'</span><span class="sxs-lookup"><span data-stu-id="1d200-466">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="1d200-467">**Journal du Module ASP.NET Core :** Fichier journal créé mais vide</span><span class="sxs-lookup"><span data-stu-id="1d200-467">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="1d200-468">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="1d200-468">Troubleshooting</span></span>

* <span data-ttu-id="1d200-469">Cette exception générale indique que le démarrage du processus a échoué, probablement en raison d’un problème de configuration d’application.</span><span class="sxs-lookup"><span data-stu-id="1d200-469">This general exception indicates that the process failed to start, most likely due to an application configuration issue.</span></span> <span data-ttu-id="1d200-470">En vous référant à [Structure de répertoires](xref:hosting/directory-structure), vérifiez que les fichiers et dossiers déployés de votre application sont corrects et que les fichiers de configuration de votre application sont présents et contiennent les paramètres appropriés pour votre application et votre environnement.</span><span class="sxs-lookup"><span data-stu-id="1d200-470">Referring to [Directory Structure](xref:hosting/directory-structure), confirm that your app's deployed files and folders are appropriate and that your app's configuration files are present and contain the correct settings for your app and environment.</span></span> <span data-ttu-id="1d200-471">Pour plus d’informations, consultez [Conseils de dépannage](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="1d200-471">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

## <a name="resources"></a><span data-ttu-id="1d200-472">Ressources</span><span class="sxs-lookup"><span data-stu-id="1d200-472">Resources</span></span>

* [<span data-ttu-id="1d200-473">Introduction au Module ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1d200-473">Introduction to ASP.NET Core Module</span></span>](xref:fundamentals/servers/aspnet-core-module)
* [<span data-ttu-id="1d200-474">Informations de référence sur la configuration du Module ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1d200-474">ASP.NET Core Module configuration reference</span></span>](xref:hosting/aspnet-core-module)
* [<span data-ttu-id="1d200-475">Utilisation de modules IIS avec ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1d200-475">Using IIS Modules with ASP.NET Core</span></span>](xref:hosting/iis-modules)
* [<span data-ttu-id="1d200-476">Présentation d’ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1d200-476">Introduction to ASP.NET Core</span></span>](../index.md)
* [<span data-ttu-id="1d200-477">Site officiel de Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="1d200-477">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="1d200-478">Bibliothèque Microsoft TechNet : Windows Server</span><span class="sxs-lookup"><span data-stu-id="1d200-478">Microsoft TechNet Library: Windows Server</span></span>](https://docs.microsoft.com/windows-server/windows-server-versions)
