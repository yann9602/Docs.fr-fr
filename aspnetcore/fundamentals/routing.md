---
title: Le routage ASP.NET Core
author: ardalis
description: "Découvrez comment les fonctionnalités de routage ASP.NET Core sont responsable de mappage d’une demande entrante à un gestionnaire d’itinéraire."
keywords: ASP.NET Core,
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: bbbcf9e4-3c4c-4f50-b91e-175fe9cae4e2
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/routing
ms.openlocfilehash: 8bce642576b6b2f9326425d30ef95168da8f47e5
ms.sourcegitcommit: 732cd2684246e49e796836596643a8d37e20c46d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/01/2017
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="3a485-104">Le routage ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3a485-104">Routing in ASP.NET Core</span></span>

<span data-ttu-id="3a485-105">Par [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), et [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="3a485-105">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="3a485-106">Fonctionnalité de routage est chargée pour le mappage d’une demande entrante vers un gestionnaire d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-106">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="3a485-107">Les itinéraires sont définis dans l’application ASP.NET et configurés au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="3a485-107">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="3a485-108">Un itinéraire peut éventuellement extraire les valeurs à partir de l’URL contenue dans la demande, et ces valeurs peuvent ensuite être utilisées pour traiter une demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="3a485-109">À l’aide des informations d’itinéraire à partir de l’application ASP.NET, la fonctionnalité de routage peut également générer des URL qui mappent aux gestionnaires d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-109">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="3a485-110">Par conséquent, le routage peut trouver un gestionnaire d’itinéraires basé sur une URL ou l’URL correspondant à un gestionnaire d’itinéraire donné en fonction des informations de gestionnaire d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-110">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="3a485-111">Ce document couvre le routage du bas niveau ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="3a485-111">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="3a485-112">Pour le routage ASP.NET MVC de base, consultez [routage vers les Actions de contrôleur](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="3a485-112">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="3a485-113">[Afficher ou télécharger l’exemple de code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([comment télécharger](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="3a485-113">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="3a485-114">Principes de base de routage</span><span class="sxs-lookup"><span data-stu-id="3a485-114">Routing basics</span></span>

<span data-ttu-id="3a485-115">Routage utilise *itinéraires* (implémentations de [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) pour :</span><span class="sxs-lookup"><span data-stu-id="3a485-115">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="3a485-116">mapper les demandes entrantes vers *acheminer des gestionnaires*</span><span class="sxs-lookup"><span data-stu-id="3a485-116">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="3a485-117">générer des URL utilisées dans les réponses</span><span class="sxs-lookup"><span data-stu-id="3a485-117">generate URLs used in responses</span></span>

<span data-ttu-id="3a485-118">En règle générale, une application possède une seule collection d’itinéraires.</span><span class="sxs-lookup"><span data-stu-id="3a485-118">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="3a485-119">Lorsqu’une demande arrive, la collection d’itinéraires est traitée dans l’ordre.</span><span class="sxs-lookup"><span data-stu-id="3a485-119">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="3a485-120">Recherche de la demande entrante d’un itinéraire qui correspond à l’URL de demande en appelant le `RouteAsync` méthode sur chaque itinéraire disponible dans la collection d’itinéraires.</span><span class="sxs-lookup"><span data-stu-id="3a485-120">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="3a485-121">En revanche, une réponse peut utiliser le routage pour générer des URL (par exemple, pour la redirection ou liaisons) en fonction des informations d’itinéraire et ainsi éviter d’avoir à coder en dur des URL, qui vous aide à la facilité de maintenance.</span><span class="sxs-lookup"><span data-stu-id="3a485-121">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="3a485-122">Le routage est connecté à la [intergiciel (middleware)](middleware.md) de pipeline par la `RouterMiddleware` classe.</span><span class="sxs-lookup"><span data-stu-id="3a485-122">Routing is connected to the [middleware](middleware.md) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="3a485-123">[ASP.NET MVC](../mvc/overview.md) ajoute le routage vers le pipeline de l’intergiciel (middleware) dans le cadre de sa configuration.</span><span class="sxs-lookup"><span data-stu-id="3a485-123">[ASP.NET MVC](../mvc/overview.md) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="3a485-124">Pour en savoir plus sur l’utilisation de routage comme un composant autonome, consultez [middleware routage à l’aide de](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="3a485-124">To learn about using routing as a standalone component, see [using-routing-middleware](#using-routing-middleware).</span></span>

<a name=url-matching-ref></a>

### <a name="url-matching"></a><span data-ttu-id="3a485-125">URL correspondant</span><span class="sxs-lookup"><span data-stu-id="3a485-125">URL matching</span></span>

<span data-ttu-id="3a485-126">URL correspondant est le processus par le routage distribue un entrant demander à un *gestionnaire*.</span><span class="sxs-lookup"><span data-stu-id="3a485-126">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="3a485-127">Ce processus est généralement basé sur des données dans le chemin d’accès URL, mais peut être étendu pour prendre en compte toutes les données de la demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-127">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="3a485-128">La possibilité de distribuer des demandes pour séparer les gestionnaires est la clé à l’échelle de la taille et la complexité d’une application.</span><span class="sxs-lookup"><span data-stu-id="3a485-128">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="3a485-129">Les demandes entrantes entrent le `RouterMiddleware`, qui appelle la `RouteAsync` méthode sur chaque itinéraire dans la séquence.</span><span class="sxs-lookup"><span data-stu-id="3a485-129">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="3a485-130">Le `IRouter` instance choisit s’il faut *gérer* la demande en définissant le `RouteContext` `Handler` à une valeur non null `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="3a485-130">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext` `Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="3a485-131">Si un itinéraire définit un gestionnaire pour la demande, itinéraire, le traitement s’arrête et le gestionnaire sera appelé pour traiter la demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-131">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="3a485-132">Si tous les itinéraires sont essayés et qu’aucun gestionnaire ne trouvé pour la demande, l’intergiciel (middleware) appelle *suivant* et de l’intergiciel (middleware) suivant dans le pipeline de requête est appelée.</span><span class="sxs-lookup"><span data-stu-id="3a485-132">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="3a485-133">L’entrée principale de `RouteAsync` est la `RouteContext` `HttpContext` associé à la demande en cours.</span><span class="sxs-lookup"><span data-stu-id="3a485-133">The primary input to `RouteAsync` is the `RouteContext` `HttpContext` associated with the current request.</span></span> <span data-ttu-id="3a485-134">Le `RouteContext.Handler` et `RouteContext` `RouteData` sont sorties qui seront définis une fois que l’itinéraire correspond à.</span><span class="sxs-lookup"><span data-stu-id="3a485-134">The `RouteContext.Handler` and `RouteContext` `RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="3a485-135">Une correspondance pendant `RouteAsync` sera également définir les propriétés de la `RouteContext.RouteData` avec les valeurs appropriées selon le traitement de la demande effectué jusqu'à présent.</span><span class="sxs-lookup"><span data-stu-id="3a485-135">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="3a485-136">Si l’itinéraire correspond à une demande, le `RouteContext.RouteData` contiennent des informations d’état importantes sur la *résultat*.</span><span class="sxs-lookup"><span data-stu-id="3a485-136">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="3a485-137">`RouteData``Values` est un dictionnaire de *valeurs d’itinéraire* produits à partir de l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-137">`RouteData` `Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="3a485-138">Ces valeurs sont généralement déterminées par l’URL de création de jetons et peuvent être utilisés pour accepter l’entrée d’utilisateur, ou prendre des décisions davantage de distribution à l’intérieur de l’application.</span><span class="sxs-lookup"><span data-stu-id="3a485-138">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="3a485-139">`RouteData``DataTokens` est un jeu de propriétés des données supplémentaires associées à l’itinéraire correspondant.</span><span class="sxs-lookup"><span data-stu-id="3a485-139">`RouteData` `DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="3a485-140">`DataTokens`sont fournis pour prendre en charge d’association état mis en correspondance des données avec chaque itinéraire afin de l’application de prendre des décisions ultérieurement en fonction de l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-140">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="3a485-141">Ces valeurs sont définis par le développeur et **pas** affectent le comportement de routage en aucune façon.</span><span class="sxs-lookup"><span data-stu-id="3a485-141">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="3a485-142">En outre, les valeurs dissimulés dans des jetons de données peuvent être de n’importe quel type, contrairement aux valeurs d’itinéraire, qui doit être facilement convertibles vers et à partir de chaînes.</span><span class="sxs-lookup"><span data-stu-id="3a485-142">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="3a485-143">`RouteData``Routers` est une liste des itinéraires que participé correctement correspondant à la demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-143">`RouteData` `Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="3a485-144">Itinéraires peuvent être imbriquées dans une autre et le `Routers` propriété reflète le chemin d’accès dans l’arborescence logique d’itinéraires qui a entraîné une correspondance.</span><span class="sxs-lookup"><span data-stu-id="3a485-144">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="3a485-145">En règle générale le premier élément de `Routers` est la collection d’itinéraires et doit être utilisé pour la génération d’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-145">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="3a485-146">Le dernier élément `Routers` est le Gestionnaire d’itinéraire correspondant.</span><span class="sxs-lookup"><span data-stu-id="3a485-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="3a485-147">Génération d’URL</span><span class="sxs-lookup"><span data-stu-id="3a485-147">URL generation</span></span>

<span data-ttu-id="3a485-148">Génération d’URL est le processus par lequel le routage peut créer un chemin d’accès d’URL basée sur un ensemble de valeurs d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="3a485-149">Cela permet une séparation logique entre les gestionnaires et les URL qui y accèdent.</span><span class="sxs-lookup"><span data-stu-id="3a485-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="3a485-150">Génération d’URL suit un processus itératif similaire, mais démarre avec le code utilisateur ou framework appellent la `GetVirtualPath` méthode de la collection d’itinéraires.</span><span class="sxs-lookup"><span data-stu-id="3a485-150">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="3a485-151">Chaque *itinéraire* aura son `GetVirtualPath` méthode appelée dans la séquence jusqu'à une valeur non null `VirtualPathData` est retourné.</span><span class="sxs-lookup"><span data-stu-id="3a485-151">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="3a485-152">Le réplica principal est une entrée `GetVirtualPath` sont :</span><span class="sxs-lookup"><span data-stu-id="3a485-152">The primary inputs to `GetVirtualPath` are:</span></span>

* <span data-ttu-id="3a485-153">`VirtualPathContext` `HttpContext`</span><span class="sxs-lookup"><span data-stu-id="3a485-153">`VirtualPathContext` `HttpContext`</span></span>

* <span data-ttu-id="3a485-154">`VirtualPathContext` `Values`</span><span class="sxs-lookup"><span data-stu-id="3a485-154">`VirtualPathContext` `Values`</span></span>

* <span data-ttu-id="3a485-155">`VirtualPathContext` `AmbientValues`</span><span class="sxs-lookup"><span data-stu-id="3a485-155">`VirtualPathContext` `AmbientValues`</span></span>

<span data-ttu-id="3a485-156">Itinéraires utilisent principalement les valeurs d’itinéraire fournies par le `Values` et `AmbientValues` pour décider où il est possible de générer une URL et les valeurs à inclure.</span><span class="sxs-lookup"><span data-stu-id="3a485-156">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it is possible to generate a URL and what values to include.</span></span> <span data-ttu-id="3a485-157">Le `AmbientValues` sont le jeu de valeurs d’itinéraire qui ont été générés à partir de la mise en correspondance la demande en cours avec le système de routage.</span><span class="sxs-lookup"><span data-stu-id="3a485-157">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="3a485-158">En revanche, `Values` sont les valeurs d’itinéraire qui spécifient comment générer l’URL de votre choix pour l’opération actuelle.</span><span class="sxs-lookup"><span data-stu-id="3a485-158">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="3a485-159">Le `HttpContext` est fournie au cas où un itinéraire a besoin d’obtenir des services ou des données supplémentaires associées au contexte actuel.</span><span class="sxs-lookup"><span data-stu-id="3a485-159">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="3a485-160">Conseil : Considérer `Values` comme étant un ensemble de remplacements pour le `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="3a485-160">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="3a485-161">Génération d’URL tente de réutiliser des valeurs d’itinéraire à partir de la requête actuelle pour faciliter la génération d’URL pour les liens à l’aide de la même itinéraire ou les valeurs d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-161">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="3a485-162">La sortie de `GetVirtualPath` est un `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="3a485-162">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="3a485-163">`VirtualPathData`est une représentation parallèle de `RouteData`; il contient le `VirtualPath` pour l’URL de sortie, ainsi que des propriétés supplémentaires qui doivent être définies par l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-163">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="3a485-164">Le `VirtualPathData` `VirtualPath` propriété contient le *chemin d’accès virtuel* produits par l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-164">The `VirtualPathData` `VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="3a485-165">Selon vos besoins, vous devrez peut-être traiter davantage le chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="3a485-165">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="3a485-166">Par exemple, si vous souhaitez afficher l’URL générée au format HTML, vous devez ajouter le chemin d’accès de base de l’application.</span><span class="sxs-lookup"><span data-stu-id="3a485-166">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="3a485-167">Le `VirtualPathData` `Router` est une référence à l’itinéraire qui a généré avec succès l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-167">The `VirtualPathData` `Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="3a485-168">Le `VirtualPathData` `DataTokens` propriétés est un dictionnaire de données supplémentaires relatives à l’itinéraire qui a généré l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-168">The `VirtualPathData` `DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="3a485-169">Il s’agit du parallèle de `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="3a485-169">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="3a485-170">Création des itinéraires</span><span class="sxs-lookup"><span data-stu-id="3a485-170">Creating routes</span></span>

<span data-ttu-id="3a485-171">Le routage fournit le `Route` classe en tant que l’implémentation standard de `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="3a485-171">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="3a485-172">`Route`utilise le *modèle d’itinéraire* syntaxe pour définir des modèles correspondant sur le chemin d’accès de l’URL lorsque `RouteAsync` est appelée.</span><span class="sxs-lookup"><span data-stu-id="3a485-172">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="3a485-173">`Route`utilisera le même modèle d’itinéraire pour générer une URL lorsque `GetVirtualPath` est appelée.</span><span class="sxs-lookup"><span data-stu-id="3a485-173">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="3a485-174">La plupart des applications de créer des itinéraires en appelant `MapRoute` ou l’une des méthodes d’extension semblable définis sur `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="3a485-174">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="3a485-175">Toutes ces méthodes créera une instance de `Route` et l’ajouter à la collection d’itinéraires.</span><span class="sxs-lookup"><span data-stu-id="3a485-175">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="3a485-176">Remarque : `MapRoute` n’accepte pas un paramètre de gestionnaire d’itinéraire - il ajoute uniquement les itinéraires qui seront gérés par le `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="3a485-176">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="3a485-177">Étant donné que le gestionnaire par défaut est un `IRouter`, il peut décider de ne pas traiter la demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-177">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="3a485-178">Par exemple, ASP.NET MVC est généralement configuré comme un gestionnaire par défaut qui gère uniquement les requêtes qui correspondent à une action et contrôleur disponible.</span><span class="sxs-lookup"><span data-stu-id="3a485-178">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="3a485-179">Pour en savoir plus sur le routage vers MVC, consultez [le routage pour les Actions de contrôleur](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="3a485-179">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="3a485-180">Il s’agit d’un exemple d’un `MapRoute` appel utilisée par une définition d’itinéraire ASP.NET MVC par défaut :</span><span class="sxs-lookup"><span data-stu-id="3a485-180">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="3a485-181">Ce modèle correspond à un chemin d’accès de l’URL comme `/Products/Details/17` et extraire les valeurs d’itinéraire `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="3a485-181">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="3a485-182">Les valeurs d’itinéraire sont déterminées par le fractionnement le chemin d’accès de l’URL en segments et correspondant à chaque segment avec le *paramètre d’itinéraire* nom dans le modèle d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-182">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="3a485-183">Paramètres d’itinéraire sont nommés.</span><span class="sxs-lookup"><span data-stu-id="3a485-183">Route parameters are named.</span></span> <span data-ttu-id="3a485-184">Ils sont définis en incluant le nom du paramètre entouré d’accolades `{ }`.</span><span class="sxs-lookup"><span data-stu-id="3a485-184">They are defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="3a485-185">Le modèle ci-dessus peut également correspondre le chemin d’accès URL `/` et génère les valeurs `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="3a485-185">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="3a485-186">Cela se produit car le `{controller}` et `{action}` paramètres d’itinéraire ont des valeurs par défaut et le `id` paramètre d’itinéraire est facultatif.</span><span class="sxs-lookup"><span data-stu-id="3a485-186">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="3a485-187">Égal `=` signe suivi d’une valeur une fois que le nom de paramètre d’itinéraire définit une valeur par défaut pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="3a485-187">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="3a485-188">Un point d’interrogation `?` après le nom de paramètre d’itinéraire définit le paramètre comme facultatif.</span><span class="sxs-lookup"><span data-stu-id="3a485-188">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="3a485-189">Paramètres avec une valeur par défaut d’itinéraire *toujours* produisent une valeur de routage lors de l’itinéraire correspond à - paramètres optionnels ne produisent pas une valeur de l’itinéraire s’il y a aucun segment de chemin d’accès d’URL correspondante.</span><span class="sxs-lookup"><span data-stu-id="3a485-189">Route parameters with a default value *always* produce a route value when the route matches - optional parameters will not produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="3a485-190">Consultez [référence du modèle d’itinéraire](#route-template-reference) pour une description complète des fonctionnalités de modèle d’itinéraire et la syntaxe.</span><span class="sxs-lookup"><span data-stu-id="3a485-190">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="3a485-191">Cet exemple inclut un *Router contrainte*:</span><span class="sxs-lookup"><span data-stu-id="3a485-191">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="3a485-192">Ce modèle correspond à un chemin d’accès de l’URL comme `/Products/Details/17`, mais pas `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="3a485-192">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="3a485-193">La définition de paramètre d’itinéraire `{id:int}` définit un *Router contrainte* pour la `id` paramètre d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-193">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="3a485-194">Implémentent des contraintes d’itinéraire `IRouteConstraint` et inspecter pour vérifier les valeurs d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-194">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="3a485-195">Dans cet exemple, la valeur de l’itinéraire `id` doit être convertible en entier.</span><span class="sxs-lookup"><span data-stu-id="3a485-195">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="3a485-196">Consultez [référence de contrainte d’itinéraire](#route-constraint-reference) pour une explication plus détaillée des contraintes d’itinéraire qui sont fournies par l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="3a485-196">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="3a485-197">Les surcharges supplémentaires de `MapRoute` accepte les valeurs pour `constraints`, `dataTokens`, et `defaults`.</span><span class="sxs-lookup"><span data-stu-id="3a485-197">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="3a485-198">Ces paramètres supplémentaires de `MapRoute` sont définies en tant que type `object`.</span><span class="sxs-lookup"><span data-stu-id="3a485-198">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="3a485-199">L’utilisation typique de ces paramètres consiste à passer un objet typé anonymement, où les noms des propriétés de la correspondance de type anonyme diriger les noms de paramètre.</span><span class="sxs-lookup"><span data-stu-id="3a485-199">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="3a485-200">Les deux exemples suivants créent équivalentes :</span><span class="sxs-lookup"><span data-stu-id="3a485-200">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="3a485-201">Conseil : La syntaxe inline pour la définition des contraintes et des valeurs par défaut peut être plus pratique pour les itinéraires simples.</span><span class="sxs-lookup"><span data-stu-id="3a485-201">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="3a485-202">Toutefois, il existe des fonctionnalités telles que les jetons de données qui ne sont pas pris en charge par la syntaxe inline.</span><span class="sxs-lookup"><span data-stu-id="3a485-202">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="3a485-203">Cet exemple illustre quelques fonctionnalités supplémentaires :</span><span class="sxs-lookup"><span data-stu-id="3a485-203">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="3a485-204">Ce modèle correspond à un chemin d’accès de l’URL comme `/Blog/All-About-Routing/Introduction` et extrait les valeurs `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="3a485-204">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="3a485-205">Les valeurs de l’itinéraire par défaut pour `controller` et `action` sont produites par l’itinéraire, même s’il n’existe aucun paramètre d’itinéraire correspondant dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="3a485-205">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="3a485-206">Valeurs par défaut peuvent être spécifiées dans le modèle d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-206">Default values can be specified in the route template.</span></span> <span data-ttu-id="3a485-207">Le `article` paramètre d’itinéraire est défini comme un *fourre-tout* par l’apparence d’un astérisque `*` avant le nom de paramètre d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-207">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="3a485-208">Paramètres d’itinéraire de fourre-tout capturer le reste du chemin d’URL et peuvent correspondre également à une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="3a485-208">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="3a485-209">Cet exemple ajoute des jetons contraintes et les données d’itinéraire :</span><span class="sxs-lookup"><span data-stu-id="3a485-209">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="3a485-210">Ce modèle correspond à un chemin d’accès de l’URL comme `/Products/5` et extrait les valeurs `{ controller = Products, action = Details, id = 5 }` et des jetons de données `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="3a485-210">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Jetons Windows variables locales](routing/_static/tokens.png)

<a name=id1></a>

### <a name="url-generation"></a><span data-ttu-id="3a485-212">Génération d’URL</span><span class="sxs-lookup"><span data-stu-id="3a485-212">URL generation</span></span>

<span data-ttu-id="3a485-213">La `Route` classe peut également effectuer de génération d’URL en combinant un ensemble de valeurs d’itinéraire et de son modèle d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-213">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="3a485-214">Il est logiquement le processus inverse de mise en correspondance le chemin d’accès d’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-214">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="3a485-215">Conseil : Pour mieux comprendre la génération de l’URL, imaginez le URL que vous souhaitez générer et puis pensez à la façon dont un modèle d’itinéraire correspondrait à cette URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-215">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="3a485-216">Quelles sont les valeurs serait produit ?</span><span class="sxs-lookup"><span data-stu-id="3a485-216">What values would be produced?</span></span> <span data-ttu-id="3a485-217">Ceci est l’équivalent du fonctionne de la génération d’URL dans la `Route` classe.</span><span class="sxs-lookup"><span data-stu-id="3a485-217">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="3a485-218">Cet exemple utilise un itinéraire de style base ASP.NET MVC :</span><span class="sxs-lookup"><span data-stu-id="3a485-218">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="3a485-219">Avec les valeurs d’itinéraire `{ controller = Products, action = List }`, cet itinéraire génère l’URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="3a485-219">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="3a485-220">Les valeurs d’itinéraire sont substitués pour les paramètres d’itinéraire correspondant former le chemin d’accès d’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-220">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="3a485-221">Étant donné que `id` est d’un paramètre d’itinéraire, elle ne pose aucun problème qu’il n’a pas une valeur.</span><span class="sxs-lookup"><span data-stu-id="3a485-221">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="3a485-222">Avec les valeurs d’itinéraire `{ controller = Home, action = Index }`, cet itinéraire génère l’URL `/`.</span><span class="sxs-lookup"><span data-stu-id="3a485-222">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="3a485-223">Les valeurs d’itinéraire qui ont été fournies correspondent aux valeurs par défaut pour les segments correspondant à ces valeurs peuvent être omis en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="3a485-223">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="3a485-224">Notez que les deux URL générées serait aller-retour avec cette définition de l’itinéraire et produire les mêmes valeurs d’itinéraire qui ont été utilisés pour générer l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-224">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="3a485-225">Conseil : Une application à l’aide d’ASP.NET MVC doit utiliser `UrlHelper` pour générer des URL au lieu d’appeler directement le routage.</span><span class="sxs-lookup"><span data-stu-id="3a485-225">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="3a485-226">Pour plus d’informations sur le processus de génération d’URL, consultez [url de référence de génération](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="3a485-226">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="3a485-227">À l’aide de routage intergiciel (middleware)</span><span class="sxs-lookup"><span data-stu-id="3a485-227">Using Routing Middleware</span></span>

<span data-ttu-id="3a485-228">Ajoutez le package NuGet « Microsoft.AspNetCore.Routing ».</span><span class="sxs-lookup"><span data-stu-id="3a485-228">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="3a485-229">Ajouter le routage vers le conteneur de service dans *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="3a485-229">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="3a485-230">Les itinéraires doivent être configurés dans le `Configure` méthode dans la `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="3a485-230">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="3a485-231">L’exemple ci-dessous utilise ces API :</span><span class="sxs-lookup"><span data-stu-id="3a485-231">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="3a485-232">`MapGet`Correspond à uniquement les requêtes HTTP GET</span><span class="sxs-lookup"><span data-stu-id="3a485-232">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="3a485-233">Le tableau ci-dessous montre les réponses avec l’URI donné.</span><span class="sxs-lookup"><span data-stu-id="3a485-233">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="3a485-234">URI</span><span class="sxs-lookup"><span data-stu-id="3a485-234">URI</span></span> | <span data-ttu-id="3a485-235">Réponse</span><span class="sxs-lookup"><span data-stu-id="3a485-235">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="3a485-236">/package/Create/3</span><span class="sxs-lookup"><span data-stu-id="3a485-236">/package/create/3</span></span>  | <span data-ttu-id="3a485-237">Hello!</span><span class="sxs-lookup"><span data-stu-id="3a485-237">Hello!</span></span> <span data-ttu-id="3a485-238">Valeurs d’itinéraire : [opération, créer], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="3a485-238">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="3a485-239">/ package/suivi /-3</span><span class="sxs-lookup"><span data-stu-id="3a485-239">/package/track/-3</span></span>  | <span data-ttu-id="3a485-240">Hello!</span><span class="sxs-lookup"><span data-stu-id="3a485-240">Hello!</span></span> <span data-ttu-id="3a485-241">Valeurs d’itinéraire : [opération, le suivi,] [id -3]</span><span class="sxs-lookup"><span data-stu-id="3a485-241">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="3a485-242">/ package/suivi/3 /</span><span class="sxs-lookup"><span data-stu-id="3a485-242">/package/track/-3/</span></span> | <span data-ttu-id="3a485-243">Hello!</span><span class="sxs-lookup"><span data-stu-id="3a485-243">Hello!</span></span> <span data-ttu-id="3a485-244">Valeurs d’itinéraire : [opération, le suivi,] [id -3]</span><span class="sxs-lookup"><span data-stu-id="3a485-244">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="3a485-245">/package/suivi</span><span class="sxs-lookup"><span data-stu-id="3a485-245">/package/track/</span></span> | <span data-ttu-id="3a485-246">\<Passage à aucune correspondance ></span><span class="sxs-lookup"><span data-stu-id="3a485-246">\<Fall through, no match></span></span> |
| <span data-ttu-id="3a485-247">OBTENIR /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="3a485-247">GET /hello/Joe</span></span> | <span data-ttu-id="3a485-248">Bonjour, Joe !</span><span class="sxs-lookup"><span data-stu-id="3a485-248">Hi, Joe!</span></span> |
| <span data-ttu-id="3a485-249">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="3a485-249">POST /hello/Joe</span></span> | <span data-ttu-id="3a485-250">\<Passer, correspond à HTTP GET uniquement ></span><span class="sxs-lookup"><span data-stu-id="3a485-250">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="3a485-251">OBTENIR /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="3a485-251">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="3a485-252">\<Passage à aucune correspondance ></span><span class="sxs-lookup"><span data-stu-id="3a485-252">\<Fall through, no match></span></span> |

<span data-ttu-id="3a485-253">Si vous configurez un seul itinéraire, appelez `app.UseRouter` en passant un `IRouter` instance.</span><span class="sxs-lookup"><span data-stu-id="3a485-253">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="3a485-254">Vous ne devez pas appeler `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="3a485-254">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="3a485-255">Le framework fournit un ensemble de méthodes d’extension pour la création d’itinéraires telles que :</span><span class="sxs-lookup"><span data-stu-id="3a485-255">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="3a485-256">Certaines de ces méthodes comme `MapGet` nécessitent un `RequestDelegate` doit être fourni.</span><span class="sxs-lookup"><span data-stu-id="3a485-256">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="3a485-257">Le `RequestDelegate` sera utilisé comme le *Gestionnaire d’itinéraire* lorsque correspond à l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-257">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="3a485-258">Autres méthodes dans cette famille de permettent la configuration d’un pipeline d’intergiciel (middleware) qui sera utilisé en tant que gestionnaire d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-258">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="3a485-259">Si le *carte* méthode n’accepte pas un gestionnaire, tel que `MapRoute`, il utilisera le `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="3a485-259">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="3a485-260">Le `Map[Verb]` méthodes utilisent des contraintes pour limiter l’itinéraire pour le verbe HTTP dans le nom de la méthode.</span><span class="sxs-lookup"><span data-stu-id="3a485-260">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="3a485-261">Par exemple, consultez [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) et [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="3a485-261">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="3a485-262">Référence de modèle d’itinéraire</span><span class="sxs-lookup"><span data-stu-id="3a485-262">Route Template Reference</span></span>

<span data-ttu-id="3a485-263">Jetons entre accolades (`{ }`) définir *paramètres d’itinéraire* sera lié si l’itinéraire est mis en correspondance.</span><span class="sxs-lookup"><span data-stu-id="3a485-263">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="3a485-264">Vous pouvez définir plusieurs paramètres d’itinéraire dans un segment de l’itinéraire, mais ils doivent être séparés par une valeur littérale.</span><span class="sxs-lookup"><span data-stu-id="3a485-264">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="3a485-265">Par exemple `{controller=Home}{action=Index}` ne serait pas un itinéraire valid, car il n’existe aucune valeur littérale entre `{controller}` et `{action}`.</span><span class="sxs-lookup"><span data-stu-id="3a485-265">For example `{controller=Home}{action=Index}` would not be a valid route, since there is no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="3a485-266">Ces paramètres d’itinéraire doivent avoir un nom, et peuvent avoir des attributs supplémentaires spécifiés.</span><span class="sxs-lookup"><span data-stu-id="3a485-266">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="3a485-267">Texte littéral autres que les paramètres d’itinéraire (par exemple, `{id}`) et le séparateur de chemin d’accès `/` doit correspondre au texte dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-267">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="3a485-268">La correspondance de texte est la casse et en fonction de la représentation sous forme décodée du chemin d’accès d’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-268">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="3a485-269">Pour faire correspondre le délimiteur de paramètre d’itinéraire littéral `{` ou `}`, échapper en répétant le caractère (`{{` ou `}}`).</span><span class="sxs-lookup"><span data-stu-id="3a485-269">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="3a485-270">Modèles d’URL qui tentent de capturer un nom de fichier avec une extension de fichier facultatif ont des considérations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="3a485-270">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="3a485-271">Par exemple, à l’aide du modèle `files/{filename}.{ext?}` - lorsque les deux `filename` et `ext` existe, les deux valeurs seront remplies.</span><span class="sxs-lookup"><span data-stu-id="3a485-271">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="3a485-272">Si une seule `filename` existe dans l’URL, les correspondances de l’itinéraire, car la période de fin `.` est facultatif.</span><span class="sxs-lookup"><span data-stu-id="3a485-272">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="3a485-273">Les URL suivantes correspondrait à cet itinéraire :</span><span class="sxs-lookup"><span data-stu-id="3a485-273">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="3a485-274">Vous pouvez utiliser la `*` caractère en tant que préfixe pour un paramètre d’itinéraire à lier au reste de l’URI - il s’agit un *fourre-tout* paramètre.</span><span class="sxs-lookup"><span data-stu-id="3a485-274">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="3a485-275">Par exemple, `blog/{*slug}` correspondrait à n’importe quel URI qui commencent par `/blog` et toute valeur (qui sont assigné à la `slug` Router valeur).</span><span class="sxs-lookup"><span data-stu-id="3a485-275">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="3a485-276">Les paramètres de collecte peuvent correspondre également à une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="3a485-276">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="3a485-277">Paramètres d’itinéraire peut-être *les valeurs par défaut*, désigné par la spécification de la valeur par défaut après le nom de paramètre, séparé par un `=`.</span><span class="sxs-lookup"><span data-stu-id="3a485-277">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="3a485-278">Par exemple, `{controller=Home}` définirait `Home` en tant que la valeur par défaut `controller`.</span><span class="sxs-lookup"><span data-stu-id="3a485-278">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="3a485-279">La valeur par défaut est utilisée si aucune valeur n’est présent dans l’URL pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="3a485-279">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="3a485-280">En plus des valeurs par défaut, les paramètres d’itinéraire peuvent être facultatif (spécifié en ajoutant un `?` à la fin du nom du paramètre, comme dans `id?`).</span><span class="sxs-lookup"><span data-stu-id="3a485-280">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="3a485-281">La différence entre facultatif et « a par défaut » n’est qu’un paramètre d’itinéraire avec une valeur par défaut génère toujours une valeur ; un paramètre optionnel a une valeur uniquement lorsqu’elle est fournie.</span><span class="sxs-lookup"><span data-stu-id="3a485-281">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="3a485-282">Paramètres d’itinéraire peuvent également avoir des contraintes, qui doivent correspondre à la valeur de l’itinéraire liée à partir de l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-282">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="3a485-283">Ajout d’un signe deux-points `:` et le nom de la contrainte après le nom de paramètre d’itinéraire spécifie un *contrainte inline* sur un paramètre d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-283">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="3a485-284">Si la contrainte requiert des arguments que ceux fournis entre parenthèses `( )` après le nom de la contrainte.</span><span class="sxs-lookup"><span data-stu-id="3a485-284">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="3a485-285">Plusieurs contraintes en ligne peuvent être spécifiés en ajoutant un autre signe deux-points `:` et le nom de la contrainte.</span><span class="sxs-lookup"><span data-stu-id="3a485-285">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="3a485-286">Le nom de la contrainte est passé à la `IInlineConstraintResolver` pour créer une instance de service `IRouteConstraint` à utiliser dans le traitement de l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-286">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="3a485-287">Par exemple, le modèle d’itinéraire `blog/{article:minlength(10)}` Spécifie le `minlength` contrainte avec l’argument `10`.</span><span class="sxs-lookup"><span data-stu-id="3a485-287">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="3a485-288">Pour plusieurs contraintes d’itinéraire description et la liste des contraintes fournies par le framework, consultez [référence de contrainte d’itinéraire](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="3a485-288">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="3a485-289">Le tableau suivant illustre certains modèles d’itinéraire et leur comportement.</span><span class="sxs-lookup"><span data-stu-id="3a485-289">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="3a485-290">Modèle d’itinéraire</span><span class="sxs-lookup"><span data-stu-id="3a485-290">Route Template</span></span> | <span data-ttu-id="3a485-291">Exemple d’URL mise en correspondance</span><span class="sxs-lookup"><span data-stu-id="3a485-291">Example Matching URL</span></span> | <span data-ttu-id="3a485-292">Remarques</span><span class="sxs-lookup"><span data-stu-id="3a485-292">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="3a485-293">hello</span><span class="sxs-lookup"><span data-stu-id="3a485-293">hello</span></span>  | <span data-ttu-id="3a485-294">/ Bonjour</span><span class="sxs-lookup"><span data-stu-id="3a485-294">/hello</span></span>  | <span data-ttu-id="3a485-295">Correspond uniquement au chemin d’accès unique`/hello`</span><span class="sxs-lookup"><span data-stu-id="3a485-295">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="3a485-296">{Page = Home}</span><span class="sxs-lookup"><span data-stu-id="3a485-296">{Page=Home}</span></span> | / | <span data-ttu-id="3a485-297">Correspond à et définit `Page` à`Home`</span><span class="sxs-lookup"><span data-stu-id="3a485-297">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="3a485-298">{Page = Home}</span><span class="sxs-lookup"><span data-stu-id="3a485-298">{Page=Home}</span></span>  | <span data-ttu-id="3a485-299">/ Contact</span><span class="sxs-lookup"><span data-stu-id="3a485-299">/Contact</span></span>  | <span data-ttu-id="3a485-300">Correspond à et définit `Page` à`Contact`</span><span class="sxs-lookup"><span data-stu-id="3a485-300">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="3a485-301">{controller} / {action} / {id} ?</span><span class="sxs-lookup"><span data-stu-id="3a485-301">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="3a485-302">/ Produits/liste</span><span class="sxs-lookup"><span data-stu-id="3a485-302">/Products/List</span></span> | <span data-ttu-id="3a485-303">Mappe à `Products` contrôleur et `List` action</span><span class="sxs-lookup"><span data-stu-id="3a485-303">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="3a485-304">{controller} / {action} / {id} ?</span><span class="sxs-lookup"><span data-stu-id="3a485-304">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="3a485-305">/ Produits/détails/123</span><span class="sxs-lookup"><span data-stu-id="3a485-305">/Products/Details/123</span></span>  |  <span data-ttu-id="3a485-306">Mappe à `Products` contrôleur et `Details` action.</span><span class="sxs-lookup"><span data-stu-id="3a485-306">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="3a485-307">`id`la valeur 123</span><span class="sxs-lookup"><span data-stu-id="3a485-307">`id` set to 123</span></span> |
| <span data-ttu-id="3a485-308">{contrôleur = Home} / {action = Index} / {id} ?</span><span class="sxs-lookup"><span data-stu-id="3a485-308">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="3a485-309">Mappe à `Home` contrôleur et `Index` méthode ; `id` est ignoré.</span><span class="sxs-lookup"><span data-stu-id="3a485-309">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="3a485-310">À l’aide d’un modèle est généralement l’approche la plus simple pour le routage.</span><span class="sxs-lookup"><span data-stu-id="3a485-310">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="3a485-311">Contraintes et des valeurs par défaut peuvent également être spécifiées en dehors du modèle d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-311">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="3a485-312">Conseil : Activer [journalisation](logging.md) pour voir comment la générées dans les implémentations de routage, tels que `Route`, correspondent aux requêtes.</span><span class="sxs-lookup"><span data-stu-id="3a485-312">Tip: Enable [Logging](logging.md) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="3a485-313">Référence de contrainte d’itinéraire</span><span class="sxs-lookup"><span data-stu-id="3a485-313">Route Constraint Reference</span></span>

<span data-ttu-id="3a485-314">Contraintes d’itinéraire exécutent quand un `Route` a mis en correspondance de la syntaxe de l’URL entrante et le chemin d’accès de l’URL sous forme de jetons dans les valeurs d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-314">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="3a485-315">En règle générale, les contraintes d’itinéraire inspecter la valeur de l’itinéraire associée via le modèle d’itinéraire et créer une simple de décision Oui/non ou non la valeur est acceptable.</span><span class="sxs-lookup"><span data-stu-id="3a485-315">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="3a485-316">Certaines contraintes d’itinéraire utilisent des données en dehors de la valeur de l’itinéraire pour envisager si la demande peut être routée.</span><span class="sxs-lookup"><span data-stu-id="3a485-316">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="3a485-317">Par exemple, le `HttpMethodRouteConstraint` peut accepter ou refuser une demande basée sur son verbe HTTP.</span><span class="sxs-lookup"><span data-stu-id="3a485-317">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="3a485-318">Évitez d’utiliser des contraintes pour **validation d’entrée**, car vous aurez ainsi que les entrées non valides entraîne une erreur 404 (introuvable) au lieu d’un 400 avec un message d’erreur approprié.</span><span class="sxs-lookup"><span data-stu-id="3a485-318">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="3a485-319">Contraintes d’itinéraire doivent être utilisés pour **lever l’ambiguïté** entre les itinéraires semblables, ne pas à valider les entrées d’un itinéraire particulier.</span><span class="sxs-lookup"><span data-stu-id="3a485-319">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="3a485-320">Le tableau suivant illustre certaines contraintes d’itinéraire et leur comportement attendu.</span><span class="sxs-lookup"><span data-stu-id="3a485-320">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="3a485-321">contrainte</span><span class="sxs-lookup"><span data-stu-id="3a485-321">constraint</span></span> | <span data-ttu-id="3a485-322">Exemple</span><span class="sxs-lookup"><span data-stu-id="3a485-322">Example</span></span> | <span data-ttu-id="3a485-323">Correspondances d’exemple</span><span class="sxs-lookup"><span data-stu-id="3a485-323">Example Matches</span></span> | <span data-ttu-id="3a485-324">Remarques</span><span class="sxs-lookup"><span data-stu-id="3a485-324">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="3a485-325">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="3a485-325">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="3a485-326">Correspond à n’importe quel entier</span><span class="sxs-lookup"><span data-stu-id="3a485-326">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="3a485-327">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="3a485-327">`true`, `FALSE`</span></span> | <span data-ttu-id="3a485-328">Correspondances `true` ou `false` (non-respect de la casse)</span><span class="sxs-lookup"><span data-stu-id="3a485-328">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="3a485-329">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="3a485-329">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="3a485-330">Correspond à un élément valide `DateTime` valeur (voir l’avertissement dans la culture dite indifférente -)</span><span class="sxs-lookup"><span data-stu-id="3a485-330">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="3a485-331">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="3a485-331">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="3a485-332">Correspond à un élément valide `decimal` valeur (voir l’avertissement dans la culture dite indifférente -)</span><span class="sxs-lookup"><span data-stu-id="3a485-332">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="3a485-333">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="3a485-333">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="3a485-334">Correspond à un élément valide `double` valeur (voir l’avertissement dans la culture dite indifférente -)</span><span class="sxs-lookup"><span data-stu-id="3a485-334">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="3a485-335">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="3a485-335">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="3a485-336">Correspond à un élément valide `float` valeur (voir l’avertissement dans la culture dite indifférente -)</span><span class="sxs-lookup"><span data-stu-id="3a485-336">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="3a485-337">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="3a485-337">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="3a485-338">Correspond à un élément valide `Guid` valeur</span><span class="sxs-lookup"><span data-stu-id="3a485-338">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="3a485-339">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="3a485-339">`123456789`, `-123456789`</span></span> | <span data-ttu-id="3a485-340">Correspond à un élément valide `long` valeur</span><span class="sxs-lookup"><span data-stu-id="3a485-340">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="3a485-341">Chaîne doit comporter au moins 4 caractères</span><span class="sxs-lookup"><span data-stu-id="3a485-341">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="3a485-342">Chaîne doit être pas plus de 8 caractères</span><span class="sxs-lookup"><span data-stu-id="3a485-342">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="3a485-343">Chaîne doit être exactement de 12 caractères.</span><span class="sxs-lookup"><span data-stu-id="3a485-343">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="3a485-344">Chaîne doit être au moins 8 et pas plus de 16 caractères</span><span class="sxs-lookup"><span data-stu-id="3a485-344">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="3a485-345">Valeur entière doit être au moins 18</span><span class="sxs-lookup"><span data-stu-id="3a485-345">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="3a485-346">Valeur entière doit être pas plus de 120</span><span class="sxs-lookup"><span data-stu-id="3a485-346">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="3a485-347">Valeur entière doit être au moins 18, mais pas plus de 120</span><span class="sxs-lookup"><span data-stu-id="3a485-347">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="3a485-348">Chaîne doit se composer d’un ou plusieurs caractères alphabétiques (`a`-`z`, non-respect de la casse)</span><span class="sxs-lookup"><span data-stu-id="3a485-348">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="3a485-349">Chaîne doit correspondre à l’expression régulière (consultez les conseils sur la définition d’une expression régulière)</span><span class="sxs-lookup"><span data-stu-id="3a485-349">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="3a485-350">Utilisé pour garantir qu’une valeur de paramètre non est présente pendant la génération d’URL</span><span class="sxs-lookup"><span data-stu-id="3a485-350">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="3a485-351">Contraintes d’itinéraire qui vérifient l’URL peuvent être convertis en un type CLR (tel que `int` ou `DateTime`) utilisez toujours la culture dite indifférente : ils supposent que l’URL n’est pas localisable.</span><span class="sxs-lookup"><span data-stu-id="3a485-351">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="3a485-352">Les contraintes d’itinéraire fourni par le framework ne modifiez pas les valeurs stockées dans les valeurs d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="3a485-352">The framework-provided route constraints do not modify the values stored in route values.</span></span> <span data-ttu-id="3a485-353">Toutes les valeurs d’itinéraire analysés à partir de l’URL seront stockées en tant que chaînes.</span><span class="sxs-lookup"><span data-stu-id="3a485-353">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="3a485-354">Par exemple, le [contrainte d’itinéraire Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) tente de convertir la valeur de l’itinéraire à virgule flottante, mais la valeur convertie est utilisée uniquement pour vérifier qu’il peut être converti en une valeur float.</span><span class="sxs-lookup"><span data-stu-id="3a485-354">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="3a485-355">Expressions régulières</span><span class="sxs-lookup"><span data-stu-id="3a485-355">Regular expressions</span></span> 

<span data-ttu-id="3a485-356">L’infrastructure ASP.NET Core ajoute `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` au constructeur d’expression régulière.</span><span class="sxs-lookup"><span data-stu-id="3a485-356">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="3a485-357">Consultez [RegexOptions, énumération](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) pour obtenir une description de ces membres.</span><span class="sxs-lookup"><span data-stu-id="3a485-357">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="3a485-358">Expressions régulières utilisent les délimiteurs et les jetons semblables à celles utilisées par le routage et le langage c#.</span><span class="sxs-lookup"><span data-stu-id="3a485-358">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="3a485-359">Jetons d’expression régulière doivent être échappés.</span><span class="sxs-lookup"><span data-stu-id="3a485-359">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="3a485-360">Par exemple, pour utiliser l’expression régulière `^\d{3}-\d{2}-\d{4}$` de routage, il doit avoir le `\` caractères tapées comme `\\` dans le fichier source c# pour échapper le `\` caractère d’échappement de chaîne (sauf à l’aide de [textuel littéraux de chaîne](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="3a485-360">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="3a485-361">Le `{` , `}` , ' [' et ']' caractères doivent être doublée pour échapper les caractères de délimitation des paramètres de routage.</span><span class="sxs-lookup"><span data-stu-id="3a485-361">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="3a485-362">Le tableau ci-dessous montre une expression régulière et la version.</span><span class="sxs-lookup"><span data-stu-id="3a485-362">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="3a485-363">Expression</span><span class="sxs-lookup"><span data-stu-id="3a485-363">Expression</span></span>               | <span data-ttu-id="3a485-364">Remarque</span><span class="sxs-lookup"><span data-stu-id="3a485-364">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="3a485-365">Expression régulière</span><span class="sxs-lookup"><span data-stu-id="3a485-365">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="3a485-366">Séquence d’échappement</span><span class="sxs-lookup"><span data-stu-id="3a485-366">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="3a485-367">Expression régulière</span><span class="sxs-lookup"><span data-stu-id="3a485-367">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="3a485-368">Séquence d’échappement</span><span class="sxs-lookup"><span data-stu-id="3a485-368">Escaped</span></span>  |

<span data-ttu-id="3a485-369">Souvent des expressions régulières utilisées dans le routage commence par la `^` caractères (correspondance la position de la chaîne de départ) et se terminent par le `$` caractère (se terminant par la position de la chaîne de correspondance).</span><span class="sxs-lookup"><span data-stu-id="3a485-369">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="3a485-370">Le `^` et `$` caractères vous assurer que la valeur de paramètre d’itinéraire entier de la correspondance d’expression régulière.</span><span class="sxs-lookup"><span data-stu-id="3a485-370">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="3a485-371">Sans le `^` et `$` caractères, l’expression régulière correspondra toute sous-chaîne dans la chaîne, ce qui est souvent pas ce que vous souhaitez.</span><span class="sxs-lookup"><span data-stu-id="3a485-371">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="3a485-372">Le tableau ci-dessous présente des exemples et explique pourquoi ils correspondent ou ne correspondent pas.</span><span class="sxs-lookup"><span data-stu-id="3a485-372">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="3a485-373">Expression</span><span class="sxs-lookup"><span data-stu-id="3a485-373">Expression</span></span>               | <span data-ttu-id="3a485-374">Chaîne</span><span class="sxs-lookup"><span data-stu-id="3a485-374">String</span></span> | <span data-ttu-id="3a485-375">Faire correspondre à</span><span class="sxs-lookup"><span data-stu-id="3a485-375">Match</span></span> | <span data-ttu-id="3a485-376">Commentaire</span><span class="sxs-lookup"><span data-stu-id="3a485-376">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="3a485-377">hello</span><span class="sxs-lookup"><span data-stu-id="3a485-377">hello</span></span> | <span data-ttu-id="3a485-378">oui</span><span class="sxs-lookup"><span data-stu-id="3a485-378">yes</span></span> | <span data-ttu-id="3a485-379">correspondances de sous-chaînes</span><span class="sxs-lookup"><span data-stu-id="3a485-379">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="3a485-380">123abc456</span><span class="sxs-lookup"><span data-stu-id="3a485-380">123abc456</span></span> | <span data-ttu-id="3a485-381">oui</span><span class="sxs-lookup"><span data-stu-id="3a485-381">yes</span></span> | <span data-ttu-id="3a485-382">correspondances de sous-chaînes</span><span class="sxs-lookup"><span data-stu-id="3a485-382">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="3a485-383">Mz</span><span class="sxs-lookup"><span data-stu-id="3a485-383">mz</span></span> | <span data-ttu-id="3a485-384">oui</span><span class="sxs-lookup"><span data-stu-id="3a485-384">yes</span></span> | <span data-ttu-id="3a485-385">correspond à l’expression</span><span class="sxs-lookup"><span data-stu-id="3a485-385">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="3a485-386">MZ</span><span class="sxs-lookup"><span data-stu-id="3a485-386">MZ</span></span> | <span data-ttu-id="3a485-387">oui</span><span class="sxs-lookup"><span data-stu-id="3a485-387">yes</span></span> | <span data-ttu-id="3a485-388">non respect de la casse</span><span class="sxs-lookup"><span data-stu-id="3a485-388">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="3a485-389">hello</span><span class="sxs-lookup"><span data-stu-id="3a485-389">hello</span></span> | <span data-ttu-id="3a485-390">Non</span><span class="sxs-lookup"><span data-stu-id="3a485-390">no</span></span> | <span data-ttu-id="3a485-391">consultez `^` et `$` ci-dessus</span><span class="sxs-lookup"><span data-stu-id="3a485-391">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="3a485-392">123abc456</span><span class="sxs-lookup"><span data-stu-id="3a485-392">123abc456</span></span> | <span data-ttu-id="3a485-393">Non</span><span class="sxs-lookup"><span data-stu-id="3a485-393">no</span></span> | <span data-ttu-id="3a485-394">consultez `^` et `$` ci-dessus</span><span class="sxs-lookup"><span data-stu-id="3a485-394">see `^` and `$` above</span></span> |

<span data-ttu-id="3a485-395">Reportez-vous à [Expressions régulières .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) pour plus d’informations sur la syntaxe d’expression régulière.</span><span class="sxs-lookup"><span data-stu-id="3a485-395">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="3a485-396">Pour contraindre un paramètre à un jeu connu de valeurs possibles, utilisez une expression régulière.</span><span class="sxs-lookup"><span data-stu-id="3a485-396">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="3a485-397">Par exemple `{action:regex(^(list|get|create)$)}` correspond uniquement à la `action` acheminer la valeur à `list`, `get`, ou `create`.</span><span class="sxs-lookup"><span data-stu-id="3a485-397">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="3a485-398">Si passé dans le dictionnaire de contraintes, la chaîne « ^ (liste | get | créer) $» serait équivalent.</span><span class="sxs-lookup"><span data-stu-id="3a485-398">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="3a485-399">Les contraintes qui sont passées dans le dictionnaire de contraintes (pas inline dans un modèle) et qui ne correspondent pas l’une des contraintes connus sont également traités comme des expressions régulières.</span><span class="sxs-lookup"><span data-stu-id="3a485-399">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="3a485-400">Référence de la génération d’URL</span><span class="sxs-lookup"><span data-stu-id="3a485-400">URL Generation Reference</span></span>

<span data-ttu-id="3a485-401">L’exemple ci-dessous montre comment générer un lien vers un itinéraire donné d’un dictionnaire de valeurs d’itinéraire et un `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="3a485-401">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="3a485-402">Le `VirtualPath` généré à la fin de l’exemple ci-dessus est `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="3a485-402">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="3a485-403">Le second paramètre pour le `VirtualPathContext` constructeur est une collection de *valeurs ambiantes*.</span><span class="sxs-lookup"><span data-stu-id="3a485-403">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="3a485-404">Valeurs ambiantes fournissent plus de commodité en limitant le nombre de valeurs, qu'un développeur doit spécifier dans un certain contexte de demande.</span><span class="sxs-lookup"><span data-stu-id="3a485-404">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="3a485-405">Les valeurs d’itinéraire actuel de la requête actuelle sont considérées comme des valeurs ambiantes pour la génération de lien.</span><span class="sxs-lookup"><span data-stu-id="3a485-405">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="3a485-406">Par exemple, dans une application ASP.NET MVC si vous êtes dans le `About` action de la `HomeController`, vous n’avez pas besoin de spécifier la valeur d’itinéraire de contrôleur à lier à la `Index` action (la valeur ambiante de `Home` sera utilisé).</span><span class="sxs-lookup"><span data-stu-id="3a485-406">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="3a485-407">Valeurs ambiantes qui ne correspond pas à un paramètre sont ignorées et ambiante les valeurs sont également ignorées lorsqu’une valeur explicitement fourni substitue à elle, allant de gauche à droite dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="3a485-407">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="3a485-408">Les valeurs qui sont fournis explicitement, mais qui ne correspond à rien sont ajoutées à la chaîne de requête.</span><span class="sxs-lookup"><span data-stu-id="3a485-408">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="3a485-409">Le tableau suivant présente le résultat lorsque vous utilisez le modèle d’itinéraire `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="3a485-409">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="3a485-410">Valeurs ambiantes</span><span class="sxs-lookup"><span data-stu-id="3a485-410">Ambient Values</span></span> | <span data-ttu-id="3a485-411">Valeurs explicites</span><span class="sxs-lookup"><span data-stu-id="3a485-411">Explicit Values</span></span> | <span data-ttu-id="3a485-412">Résultat</span><span class="sxs-lookup"><span data-stu-id="3a485-412">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="3a485-413">contrôleur = « Accueil »</span><span class="sxs-lookup"><span data-stu-id="3a485-413">controller="Home"</span></span> | <span data-ttu-id="3a485-414">action = « About »</span><span class="sxs-lookup"><span data-stu-id="3a485-414">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="3a485-415">contrôleur = « Accueil »</span><span class="sxs-lookup"><span data-stu-id="3a485-415">controller="Home"</span></span> | <span data-ttu-id="3a485-416">contrôleur = « Order », action = « About »</span><span class="sxs-lookup"><span data-stu-id="3a485-416">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="3a485-417">contrôleur = « Home », color = « Red »</span><span class="sxs-lookup"><span data-stu-id="3a485-417">controller="Home",color="Red"</span></span> | <span data-ttu-id="3a485-418">action = « About »</span><span class="sxs-lookup"><span data-stu-id="3a485-418">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="3a485-419">contrôleur = « Accueil »</span><span class="sxs-lookup"><span data-stu-id="3a485-419">controller="Home"</span></span> | <span data-ttu-id="3a485-420">action = « About », de couleur = « Red »</span><span class="sxs-lookup"><span data-stu-id="3a485-420">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="3a485-421">Si un itinéraire a la valeur par défaut qui ne correspond pas à un paramètre et cette valeur est explicitement fournie, il doit correspondre à la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="3a485-421">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="3a485-422">Exemple :</span><span class="sxs-lookup"><span data-stu-id="3a485-422">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="3a485-423">Génération de liens génère un lien pour cet itinéraire uniquement lorsque les valeurs correspondantes pour le contrôleur et d’action sont fournis.</span><span class="sxs-lookup"><span data-stu-id="3a485-423">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
